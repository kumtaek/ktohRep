# 소스 분석 에이전트 기능 요약

이 문서는 소스 분석 에이전트의 주요 기능과 각 기능에 대한 간략한 설명을 제공합니다.

## 1. 코드 파싱 및 메타데이터 추출
다양한 소스 코드 파일에서 구조적 메타데이터를 추출합니다.
*   **Java 코드 파싱**: `javalang` 및 `Tree-sitter` 라이브러리를 활용하여 Java 클래스, 인터페이스, 열거형, 메서드, 어노테이션, 상속/구현 관계 및 메서드 호출 관계를 분석합니다. 두 파서 간의 폴백(fallback) 메커니즘을 지원하여 안정성을 높입니다.
*   **JSP 및 MyBatis XML 파싱**: `Tree-sitter` 기반의 AST 파싱과 `lxml`을 사용하여 JSP 파일 내의 SQL 구문, JSTL 태그, JSP include 의존성, MyBatis XML 내의 SQL 유닛, 동적 SQL 태그(`if`, `choose`, `foreach` 등) 및 `include`, `bind` 관계를 분석합니다.
*   **SQL 구문 분석**: `jsqlparser` (사용 가능 시) 또는 정규식 기반으로 SQL 구문에서 테이블, 컬럼, 조인 조건, WHERE 절 필터 조건 등을 추출합니다. Oracle PL/SQL 요소 감지 기능도 포함합니다.

## 2. LLM 기반 코드 분석 및 메타데이터 강화
대규모 언어 모델(LLM)을 활용하여 추출된 메타데이터를 심층 분석하고 보강합니다.
*   **코드 요소 요약**: JSP, Java 파일, 메서드, SQL 쿼리 등 다양한 코드 요소의 기능을 LLM이 이해하고 요약 설명을 생성합니다.
*   **데이터베이스 주석 강화 (Enhanced Comment)**: LLM이 JSP, Java, SQL 코드의 컨텍스트를 분석하여 데이터베이스 테이블 및 컬럼에 대한 상세하고 의미 있는 주석을 자동으로 생성하고 보강합니다.
*   **SQL 조인 조건 분석**: LLM이 SQL 조인 조건을 분석하여 누락되었거나 복잡한 조인 관계에 대한 통찰을 제공합니다.

## 3. 시각화 기능
분석된 코드 및 데이터베이스 관계를 다양한 다이어그램으로 시각화하여 시스템 이해를 돕습니다.
*   **시퀀스 다이어그램**: 메서드 호출 흐름을 시각화하여 코드 실행 경로를 명확하게 보여줍니다. 자동 시작점 감지 및 미해결 호출(unresolved calls) 처리 기능을 포함합니다.
*   **ERD (Entity-Relationship Diagram)**: 데이터베이스 테이블 간의 관계를 시각화합니다.
*   **강화된 ERD (Enhanced ERD)**: 일반 ERD에 LLM 기반으로 강화된 테이블/컬럼 주석 정보를 포함하여 더 풍부한 정보를 제공합니다.
*   **의존성 그래프**: 파일, 클래스, 메서드, SQL 유닛 간의 다양한 의존성 관계를 그래프 형태로 표현합니다.
*   **관련성 그래프**: 코드 요소 간의 관련성(relatedness)을 분석하여 시각화합니다.
*   **컴포넌트 다이어그램**: 시스템의 주요 컴포넌트와 그 관계를 시각화합니다.
*   **클래스 다이어그램**: 클래스 구조, 속성, 메서드 및 클래스 간의 관계를 시각화합니다.

## 4. 보안 취약점 탐지
코드 내에서 잠재적인 보안 취약점을 탐지합니다.
*   **SQL Injection 탐지**: JSP 및 MyBatis XML 파일 내에서 SQL Injection 취약점 패턴을 식별합니다.
*   **XSS (Cross-Site Scripting) 탐지**: JSP 파일 내에서 XSS 취약점 패턴을 식별합니다.

## 5. 대용량 파일 처리 및 최적화
대규모 코드베이스를 효율적으로 처리하기 위한 기능을 제공합니다.
*   **청크 단위 파싱**: 대용량 파일을 청크(chunk) 단위로 나누어 파싱함으로써 메모리 사용량을 최적화하고 처리 속도를 향상시킵니다.
*   **변경 시간(mtime) 기반 최적화**: 파일의 최종 수정 시간을 활용하여 변경되지 않은 파일에 대한 불필요한 재분석을 줄입니다.

## 6. 보고서 및 명세서 생성
분석 결과를 바탕으로 다양한 형태의 보고서 및 명세서를 자동으로 생성합니다.
*   **소스 코드 명세서**: 프로젝트의 소스 코드 구조, 주요 기능, LLM 요약 등을 포함하는 마크다운 형식의 명세서를 생성합니다.
*   **테이블 명세서**: 데이터베이스 테이블 구조, 컬럼 정보, LLM 강화 주석 등을 포함하는 마크다운 형식의 명세서를 생성합니다.
