# ?듯빀 ?뚯뒪??耳?댁뒪 - ?뚯뒪 遺꾩꽍湲?諛??쒓컖??紐⑤뱢

蹂?臾몄꽌???뚯뒪 遺꾩꽍 ?먯씠?꾪듃???듭떖 湲곕뒫 諛?媛쒖꽑 ?ы빆, 洹몃━怨??쒓컖??紐⑤뱢??湲곕뒫??寃利앺븯湲??꾪븳 ?듯빀 ?뚯뒪??耳?댁뒪? ?섑뵆 ?뚯뒪 肄붾뱶瑜??뺤쓽?⑸땲?? 湲곗〈 `prd_v4.md` 諛?媛쒕컻 由щ럭 臾몄꽌?ㅼ쓽 ?붽뎄?ы빆??醫낇빀?섍퀬, ?뚯뒪???쒕굹由ъ삤瑜?異붽??섏뿬 遺꾩꽍湲곗쓽 ?뺥솗?? ?깅뒫, ?덉젙??諛??뺤옣?깆쓣 ????μ긽?쒗궎湲??꾪븳 湲곕컲??留덈젴?⑸땲??

---

## 1. ?듯빀 ?섑뵆 ?뚯뒪 肄붾뱶 媛쒖슂 (From testcase/phase1/test_cases.md)

湲곗〈 `PROJECT` ?대뜑 ?섏쐞???щ윭 ?뚯뒪?몄??댁뒪 諛??섑뵆 ?뚯뒪?ㅼ쓣 `PROJECT/sampleSrc` ?대뜑濡??듯빀?섏??듬땲?? ???듯빀 ?뚯뒪???ㅼ뼇??Java, MyBatis XML, JSP ?⑦꽩???ы븿?섎ŉ, ?덈줈???뚯뒪???붽뎄?ы빆??諛섏쁺?⑸땲??

### 1.1. `IntegratedService.java`

---
name: 1.1. `IntegratedService.java`
kind: java_parser
input: PROJECT/sampleSrc/src/main/java/com/example/integrated/IntegratedService.java
skip_if_missing_input: true
expected:
  classes_min: 1
  methods_min: 1
---
### 1.2. `IntegratedMapper.java`

---
name: 1.2. `IntegratedMapper.java`
kind: java_parser
input: PROJECT/sampleSrc/src/main/java/com/example/integrated/IntegratedMapper.java
skip_if_missing_input: true
expected:
  classes_min: 1
  methods_min: 1
---
### 1.3. `IntegratedMapper.xml`

---
name: 1.3. `IntegratedMapper.xml`
kind: jsp_mybatis_parser
input: PROJECT/sampleSrc/src/main/resources/mybatis/IntegratedMapper.xml
skip_if_missing_input: true
expected:
  sql_min: 1
---
### 1.4. `IntegratedView.jsp`

---
name: 1.4. `IntegratedView.jsp`
kind: jsp_mybatis_parser
input: PROJECT/sampleSrc/src/main/webapp/WEB-INF/jsp/IntegratedView.jsp
skip_if_missing_input: true
expected:
  sql_min: 0
---
### 1.5. `integratedHeader.jspf`

`IntegratedView.jsp`???ы븿?섎뒗 ?ㅻ뜑 ?꾨옒洹몃㉫???뚯씪?낅땲??

**?뚯뒪 ?꾩튂**: `PROJECT/sampleSrc/src/main/webapp/WEB-INF/jsp/_fragments/integratedHeader.jspf`

---

## 2. ?듯빀 ?뚯뒪??耳?댁뒪 紐⑸줉 (From testcase/phase1/test_cases.md)

?꾨옒 ?뚯뒪??耳?댁뒪?ㅼ? `PROJECT/sampleSrc`???듯빀???섑뵆 ?뚯뒪 肄붾뱶瑜?湲곕컲?쇰줈, ?뚯뒪 遺꾩꽍湲곗쓽 ?ㅼ뼇??湲곕뒫??寃利앺븯湲??꾪빐 ?ㅺ퀎?섏뿀?듬땲?? 媛??뚯뒪??耳?댁뒪??`?뚯뒪?몄??댁뒪_?듯빀.md` ?뚯씪 ?댁뿉???대뼡 ?뚯뒪 ?뚯씪???대뼡 遺遺꾩씠 ?대떦?섎뒗吏 紐낇솗???뺣━?섏뼱 ?덉뒿?덈떎.

### 2.1. TC_INTEGRATED_001_BasicJavaParsing: 湲곕낯 Java 肄붾뱶 ?뚯떛 諛?硫뷀??곗씠??異붿텧

*   **Description**: `IntegratedService.java`??`startProcess`, `doWork` 硫붿꽌?쒖? `getStaticUserData` ??湲곕낯 Java 硫붿꽌?쒕뱾???뺥솗???뚯떛?섍퀬 硫뷀??곗씠???대옒?? 硫붿꽌??媛 異붿텧?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedService.java` (`startProcess`, `doWork`, `getStaticUserData` 硫붿꽌??

### 2.2. TC_INTEGRATED_002_DynamicSQLGeneration: JSP ?숈쟻 SQL ?앹꽦 諛?SQL Injection ?먯?

*   **Description**: `IntegratedView.jsp`?먯꽌 ?붿껌 ?뚮씪誘명꽣???곕씪 ?숈쟻?쇰줈 ?앹꽦?섎뒗 `PRODUCT` 諛?`CUSTOMER` SQL 荑쇰━ 臾몄옄?댁씠 ?뺥솗???앸퀎?섍퀬, SQL Injection 痍⑥빟???⑦꽩 (`id = '...'`)???먯??섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedView.jsp` (Product 諛?Customer SQL ?앹꽦 ?ㅽ겕由쏀?由?

### 2.3. TC_INTEGRATED_003_MyBatisDynamicSQL: MyBatis ?숈쟻 SQL 諛??꾩닔 ?꾪꽣 異붿텧

*   **Description**: `IntegratedMapper.xml`??`findDynamicData` 荑쇰━?먯꽌 `<if>`, `<choose>`, `<foreach>` ???숈쟻 ?쒓렇媛 ?뺥솗??泥섎━?섍퀬, `DEL_YN = 'N'`怨?媛숈? ?꾩닔 ?꾪꽣媛 `required_filters` ?뚯씠釉붿뿉 ??λ릺?붿? ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedMapper.xml` (`findDynamicData` 荑쇰━)

### 2.4. TC_INTEGRATED_004_ComplexSQLParsing: 蹂듭옟 SQL (CTE, Subquery, ANSI/Implicit JOIN) ?뚯떛

*   **Description**: `IntegratedMapper.xml`??`getComplexReport` 荑쇰━ (CTE, ?쒕툕荑쇰━, 議곗씤) 諛?`getOrdersWithCustomerAnsiJoin` (ANSI JOIN), `getOrdersWithCustomerImplicitJoin` (Oracle Implicit JOIN) 荑쇰━?ㅼ씠 ?뺥솗???뚯떛?섍퀬 議곗씤 議곌굔, ?꾪꽣 ?깆씠 異붿텧?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedMapper.xml` (`getComplexReport`, `getOrdersWithCustomerAnsiJoin`, `getOrdersWithCustomerImplicitJoin` 荑쇰━)

### 2.5. TC_INTEGRATED_005_LLMCommentGeneration: LLM 湲곕컲 二쇱꽍 ?앹꽦 諛??쒖???

*   **Description**: `IntegratedService.java`??`calculateOrderTotal` 硫붿꽌??(?쒖? 二쇱꽍) 諛?`IntegratedMapper.xml`??`findDynamicData` 荑쇰━ (?쒖? 二쇱꽍)?????LLM 湲곕컲?쇰줈 怨좏뭹吏?肄붾찘?멸? ?앹꽦?섎뒗吏, `getFormattedId` 硫붿꽌??(遺??二쇱꽍)? 媛숈? 耳?댁뒪??泥섎━?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedService.java` (`calculateOrderTotal`, `getFormattedId` 硫붿꽌??, `IntegratedMapper.xml` (`findDynamicData` 荑쇰━ ?곷떒 二쇱꽍)

### 2.6. TC_INTEGRATED_006_LargeFilePerformance: ?洹쒕え ?뚯씪 遺꾩꽍 ?깅뒫

*   **Description**: `IntegratedService.java` (100媛??붾? 硫붿꽌?? 諛?`IntegratedView.jsp` (50媛?諛섎났 ?뱀뀡)? 媛숈? ?洹쒕え ?뚯씪??遺꾩꽍???? 遺꾩꽍湲곌? 硫?곗뒪?덈뱶 諛⑹떇?쇰줈 ?⑥쑉?곸쑝濡?泥섎━?섏뿬 ?깅뒫 紐⑺몴瑜??ъ꽦?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedService.java` (`largeMethod1` ~ `largeMethod100`), `IntegratedView.jsp` (50媛?諛섎났 ?뱀뀡)

### 2.7. TC_INTEGRATED_007_ComplexSQLQueries: 10媛??뚯씠釉?議곗씤 蹂듭옟 荑쇰━ 5醫?

*   **Description**: `IntegratedMapper.xml`???덈줈 異붽???5媛쒖쓽 蹂듭옟??SQL 荑쇰━ (`getSalesPerformanceReport`, `getCustomerActivitySummary`, `getProjectResourceUtilization`, `getFinancialTransactionAudit`, `getSupplyChainOptimization`)媛 10媛??뚯씠釉?議곗씤, ?쒕툕荑쇰━, ?ㅼ뭡??荑쇰━, SF ?⑥닔 ?몄텧 ?깆쓣 ?ы븿?섏뿬 ?뺥솗???뚯떛?섍퀬 硫뷀??곗씠?곌? 異붿텧?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedMapper.xml` (5媛?蹂듭옟 SQL 荑쇰━)

### 2.8. TC_INTEGRATED_008_ReflectionAndDynamicSQL: 由ы뵆?됱뀡 諛??숈쟻 SQL ?좊ː??

*   **Description**: `IntegratedService.java`??`processWithReflection` 硫붿꽌??(由ы뵆?됱뀡 ?ъ슜) 諛?`getDynamicUserData` 硫붿꽌??(?숈쟻 SQL ?ъ슜)? 媛숈씠 ?좊ː??媛먯젏 ?붿씤???덈뒗 肄붾뱶?????CONFIDENCE ?먯닔媛 ??쾶 痢≪젙?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedService.java` (`processWithReflection`, `getDynamicUserData` 硫붿꽌??

### 2.9. TC_INTEGRATED_009_VulnerabilityDetection: 蹂댁븞 痍⑥빟???먯? 諛????

*   **Description**: `VulnerabilityTestService.java`???ы븿???ㅼ뼇??蹂댁븞 痍⑥빟??(SQL Injection, XSS, Path Traversal, ?섎뱶肄붾뵫???먭꺽利앸챸, ?쏀븳 ?뷀샇???????뺥솗???먯??섍퀬 `vulnerability_fixes` ?뚯씠釉붿뿉 ??λ릺?붿? ?뺤씤?⑸땲??
*   **Associated Source**: `VulnerabilityTestService.java` (紐⑤뱺 痍⑥빟??硫붿꽌??

### 2.10. TC_INTEGRATED_010_IncrementalAnalysis: 利앸텇 遺꾩꽍 湲곕뒫

*   **Description**: `--incremental` ?뚮옒洹몃? ?ъ슜?섏뿬 ?뚯씪 ?댁떆 湲곕컲?쇰줈 蹂寃쎈맂 ?뚯씪留?遺꾩꽍?섎뒗 利앸텇 遺꾩꽍 湲곕뒫???щ컮瑜닿쾶 ?숈옉?섎뒗吏 ?뺤씤?⑸땲?? ?뚯씪 蹂寃??꾪썑濡?遺꾩꽍???섑뻾?섏뿬 蹂寃쎈맂 ?뚯씪留?泥섎━?섎뒗吏 寃利앺빀?덈떎.
*   **Test Steps**:
    1.  ?꾩껜 ?꾨줈?앺듃 遺꾩꽍 ?섑뻾
    2.  ?뱀젙 ?뚯씪 ?섏젙 (?? IntegratedService.java??硫붿꽌???섎굹 ?섏젙)
    3.  `--incremental` ?뚮옒洹몃줈 ?щ텇???섑뻾
    4.  蹂寃쎈맂 ?뚯씪留?泥섎━?섎뒗吏 濡쒓렇 ?뺤씤

### 2.11. TC_INTEGRATED_011_MethodCallResolution: 硫붿꽌???몄텧 愿怨??닿껐

*   **Description**: `IntegratedService.java`?먯꽌 `integratedMapper`??硫붿꽌?쒕? ?몄텧?섎뒗 愿怨꾧? ?щ컮瑜닿쾶 ?닿껐?섏뼱 `edges` ?뚯씠釉붿뿉 ??λ릺怨? ?좊ː???먯닔媛 ?곸젅??怨꾩궛?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `IntegratedService.java`??留ㅽ띁 硫붿꽌???몄텧 (`integratedMapper.executeStaticQuery()` ??

### 2.12. TC_INTEGRATED_012_ConfidenceThresholding: ?좊ː???꾧퀎媛??꾪꽣留?

*   **Description**: `config.yaml`?먯꽌 `confidence_threshold` 媛믪쓣 ?ㅼ젙?섍퀬, ?ㅼ젙媛믩낫????? ?좊ː?꾨? 媛吏??ｌ???遺꾩꽍 寃곌낵媛 ?꾪꽣留곷릺????λ릺吏 ?딅뒗吏 ?뺤씤?⑸땲??
*   **Test Steps**:
    1.  `confidence_threshold: 0.7`濡??ㅼ젙
    2.  ?꾨줈?앺듃 遺꾩꽍 ?섑뻾
    3.  ??λ맂 `edges` ?뚯씠釉붿뿉??紐⑤뱺 ?덉퐫?쒖쓽 `confidence` 媛믪씠 0.7 ?댁긽?몄? ?뺤씤

### 2.13. TC_INTEGRATED_013_DatabaseSchemaFlexibility: DB ?ㅽ궎留??뚯쑀???좎뿰??

*   **Description**: `config.yaml`?먯꽌 `database.default_schema` ?ㅼ젙???듯빐 ?섎뱶肄붾뵫??'SAMPLE' ?뚯쑀??????ㅼ젙 ?뚯씪??媛믪쓣 ?ъ슜?섏뿬 ?뚯씠釉붿쓣 留ㅼ묶?섎뒗吏 ?뺤씤?⑸땲??
*   **Test Steps**:
    1.  `config.yaml`?먯꽌 `database.default_schema: PUBLIC` ?ㅼ젙
    2.  ?꾨줈?앺듃 遺꾩꽍 ?섑뻾
    3.  PUBLIC ?ㅽ궎留덉쓽 ?뚯씠釉붾뱾???щ컮瑜닿쾶 留ㅼ묶?섎뒗吏 ?뺤씤

### 2.14. TC_INTEGRATED_014_ComplexityAnalysis: 肄붾뱶 蹂듭옟??遺꾩꽍

*   **Description**: `VulnerabilityTestService.java`??`processComplexBusiness` 硫붿꽌?쒖? 媛숈씠 以묒꺽??議곌굔臾? 蹂듭옟???쒗쁽?앹쓣 ?ы븿??硫붿꽌?쒖쓽 蹂듭옟?꾧? ?щ컮瑜닿쾶 怨꾩궛?섍퀬 ?좊ː?꾩뿉 諛섏쁺?섎뒗吏 ?뺤씤?⑸땲??
*   **Associated Source**: `VulnerabilityTestService.java` (`processComplexBusiness` 硫붿꽌??

---

## 3. DB ?ㅽ궎留??듯빀 (From testcase/phase1/test_cases.md)

湲곗〈 `DB_SCHEMA` ?대뜑 ?섏쐞???щ윭 `ALL_TABLES.csv`, `ALL_TAB_COLUMNS.csv`, `ALL_TAB_COMMENTS.csv`, `PK_INFO.csv` ?뚯씪?ㅼ쓣 `E:\SourceAnalyzer.git\DB_SCHEMA` 寃쎈줈濡??듯빀?섏??듬땲?? ???뚯씪?ㅼ? ?듯빀 ?섑뵆 ?뚯뒪?먯꽌 李몄“?섎뒗 紐⑤뱺 ?뚯씠釉?諛?而щ읆 ?뺣낫瑜??ы븿?⑸땲??

**?듯빀??DB ?ㅽ궎留??뚯씪 ?꾩튂**:

*   `E:\SourceAnalyzer.git\DB_SCHEMA\ALL_TABLES.csv`
*   `E:\SourceAnalyzer.git\DB_SCHEMA\ALL_TAB_COLUMNS.csv`
*   `E:\SourceAnalyzer.git\DB_SCHEMA\ALL_TAB_COMMENTS.csv`
*   `E:\SourceAnalyzer.git\DB_SCHEMA\PK_INFO.csv`

---

## 4. ?ν썑 ?뚯뒪?????꾩????뺣━ (From testcase/phase1/test_cases.md)

*   **?뚯뒪-?뚯뒪?몄??댁뒪 留ㅽ븨**: 媛??듯빀 ?뚯뒪??耳?댁뒪(`TC_INTEGRATED_XXX`)??`PROJECT/sampleSrc` ?대뜑 ?댁쓽 ?뱀젙 ?뚯씪 諛?肄붾뱶 ?뱀뀡怨?吏곸젒?곸쑝濡??곌껐?⑸땲?? ?뚯뒪???섑뻾 ???대떦 ?뚯뒪 肄붾뱶瑜?李몄“?섏뿬 遺꾩꽍 寃곌낵???뺥솗?깆쓣 寃利앺븷 ???덉뒿?덈떎.
*   **DB ?ㅽ궎留??쒖슜**: `IntegratedMapper.xml`???뺤쓽??SQL 荑쇰━?ㅼ? ?듯빀??`DB_SCHEMA` ?뚯씪?ㅼ쓣 李몄“?⑸땲?? 遺꾩꽍湲곌? SQL ???뚯씠釉?諛?而щ읆??DB ?ㅽ궎留덉? ?뺥솗??留ㅼ묶?섎뒗吏 ?뺤씤?섎뒗 ???쒖슜?⑸땲??
*   **二쇱꽍 湲곕컲 硫뷀??뺣낫**: `IntegratedService.java` 諛?`IntegratedMapper.xml`???ы븿???쒖??붾맂 二쇱꽍(`@MethodName`, `@TableName` ??? LLM 湲곕컲 肄붾찘???앹꽦 諛?硫뷀??뺣낫 異붿텧???뺥솗?꾨? ?뚯뒪?명븯????以묒슂????븷???⑸땲??
*   **?깅뒫 痢≪젙**: ?洹쒕え ?뚯씪 (`IntegratedService.java`, `IntegratedView.jsp`) 遺꾩꽍 ??`config.yaml`??`processing.max_workers` ?ㅼ젙??蹂寃쏀븯硫?遺꾩꽍 ?쒓컙??痢≪젙?섏뿬 蹂묐젹 泥섎━ ?깅뒫??寃利앺븷 ???덉뒿?덈떎.
*   **CONFIDENCE 寃利?*: `IntegratedService.java`??由ы뵆?됱뀡 諛??숈쟻 SQL ?ъ슜, `IntegratedMapper.xml`???숈쟻 ?쒓렇 ?ъ슜 ?깆? CONFIDENCE ?먯닔 媛먯젏 ?붿씤?쇰줈 ?묒슜?⑸땲?? 遺꾩꽍 ???앹꽦??硫뷀??곗씠?곗쓽 `confidence` ?꾨뱶瑜??뺤씤?섏뿬 ?곗떇???뺥솗?깆쓣 寃利앺븷 ???덉뒿?덈떎.

---

## 5. Phase1 Analyzer Testcases (From testcase/phase1/testcase.md)

蹂?臾몄꽌??phase1 遺꾩꽍 ?뚯씠?꾨씪???뚯꽌/硫뷀?DB ???洹몃옒??鍮뚮뱶)???섎룞 ?뚯뒪???쒕굹由ъ삤?낅땲?? PROJECT???섑뵆 ?뚯뒪??蹂??뚯뒪?몃? ?꾪빐 ?쇰? 異붽??섏뿀?듬땲??

### 5.0. ?ъ쟾 以鍮?

-   Python 3.10+, `pip install -r requirements.txt`
-   ?ㅼ젙: `config/config.yaml` (湲곕낯 ?ъ슜)
-   遺꾩꽍 ??? `PROJECT/sampleSrc`

### 5.1. ?ㅽ뻾

```bash
python phase1/src/main.py PROJECT/sampleSrc --project-name sample --config config/config.yaml
```

湲곕? 寃곌낵:
-   `data/metadata.db` ?앹꽦
-   肄섏넄/濡쒓렇??遺꾩꽍 ?붿빟 異쒕젰

### 5.2. MyBatis 議곗씤 異붿텧 寃利?(v1.4 ?뺤옣)

????뚯씪: `PROJECT/sampleSrc/src/main/resources/mybatis/TestJoinMapper.xml`

泥댄겕 ?ъ씤??
-   `sql_units`??`selectUserOrders`, `selectUserOrdersWithInclude`, `selectCompositeJoin` ?깅줉
-   **v1.4 ?좉퇋**: ?숈쟻 SQL 泥섎━ 寃利?
    -   `selectDynamicChoose`: `<bind>`, `<choose>/<when>/<otherwise>` 泥섎━
    -   `selectWithForeach`: `<foreach>` IN ?쒗쁽?쇰줈 ?붿빟
    -   `selectWithNestedInclude`: 以묒꺽??`<include>`怨?`<where>/<if>` 泥섎━
-   `joins`???ㅼ쓬 ?⑦꽩 議댁옱:
    -   `SAMPLE.USERS.USER_ID = SAMPLE.ORDERS.USER_ID`
    -   `SAMPLE.ORDER_ITEMS.ORDER_ID = SAMPLE.ORDERS.ORDER_ID`
    -   `SAMPLE.ORDER_ITEMS.PRODUCT_ID = SAMPLE.PRODUCTS.PRODUCT_ID`

寃利?諛⑸쾿(?? sqlite3):
```sql
.open data/metadata.db
select * from sql_units where stmt_id in ('selectUserOrders','selectUserOrdersWithInclude','selectCompositeJoin');
select l_table,l_col,r_table,r_col from joins;
```

### 5.3. JSP include / JSP SQL 寃異?寃利?

????뚯씪: `PROJECT/sampleSrc/src/main/webapp/WEB-INF/jsp/test/testPage.jsp`

泥댄겕 ?ъ씤??
-   JSP SQL ?⑦꽩 1嫄??댁긽 寃異?`sql_units.origin='jsp'`)
-   include ?꾨낫(?ㅻ뜑/?듯빀?ㅻ뜑) 異붿텧 ??鍮뚮뱶 ??`edges.edge_kind='include'` 異붽?(蹂닿컯 ??

?덉떆 吏덉쓽:
```sql
select origin, stmt_id from sql_units where file_id in (
  select file_id from files where path like '%/WEB-INF/jsp/test/testPage.jsp'
);
```

### 5.4. Java ?몄텧/?ㅻ쾭濡쒕뱶/?뺤쟻 ?꾪룷??寃利?蹂닿컯 ??

????뚯씪:
-   `PROJECT/sampleSrc/src/main/java/com/example/service/OverloadService.java`
-   `PROJECT/sampleSrc/src/main/java/com/example/util/Texts.java`
-   `PROJECT/sampleSrc/src/main/java/com/example/service/impl/ListServiceImpl1.java`

泥댄겕 ?ъ씤??
-   `classes/methods`??OverloadService, find(int), find(String), process() ?깅줉
-   call ?뚰듃(edge_hints) ?앹꽦 ??洹몃옒??鍮뚮뱶 ??`edges(edge_kind='call')`濡??쇰? ?댁냼
-   static import(`Texts.isEmpty`)????? confidence濡??꾨낫 ?곌껐 ?먮뒗 蹂대쪟

?덉떆 吏덉쓽:
```sql
select name, signature from methods m join classes c on m.class_id=c.class_id where c.name='OverloadService';
select count(*) from edges where edge_kind='call';
```

### 5.5. ?뚯씠釉??ъ슜(use_table) / PK-FK 異붾줎 寃利?

泥댄겕 ?ъ씤??
-   `edges(edge_kind='use_table')`媛 sql_unit?뭗b_table濡??앹꽦
-   鍮덈룄/PK 援먯감寃利?蹂닿컯 ??濡?`joins.inferred_pkfk=1` 諛?confidence 蹂댁젙

?덉떆 吏덉쓽:
```sql
select edge_kind,count(*) from edges group by edge_kind;
select inferred_pkfk, count(*) from joins group by inferred_pkfk;
```

### 5.6. 濡쒓렇/?먮윭 ?뺤씤

-   ?뚯씪: `logs/analyzer.log`
-   ?ㅽ뙣/?덉쇅 濡쒓렇媛 ?녿뒗吏 ?뺤씤

### 5.7. v1.4 ?좉퇋 湲곕뒫 ?뚯뒪??

#### 5.7.1 ?숈쟻 SQL ?댁꽍 ?뚯뒪??
```bash
# ?숈쟻 SQL???ы븿??留ㅽ띁?먯꽌 議곌굔/遺꾧린 蹂댁〈 ?뺤씤
python phase1/src/main.py PROJECT/sampleSrc --project-name sample --config config/config.yaml
```

寃利???ぉ:
-   `<bind>` 蹂?섍? ?뺢퇋?붾맂 SQL???곸젅??移섑솚
-   `<choose>/<when>` 遺꾧린媛 ???遺꾧린濡??붿빟?섍퀬 二쇱꽍 蹂댁〈
-   `<foreach>` 釉붾줉??`IN (:list[])` ?뺥깭濡??붿빟

#### 5.7.2 Mermaid ?대낫?닿린 媛쒖꽑 ?뚯뒪??
```bash
# ?ㅼ뼇??export strategy ?뚯뒪??
python visualize_cli.py graph --project-id 1 --out test_full.html --export-strategy full
python visualize_cli.py graph --project-id 1 --out test_balanced.html --export-strategy balanced --min-confidence 0.4
python visualize_cli.py class --project-id 1 --out test_class.html --class-methods-max 5 --class-attrs-max 8
```

### 5.8. 二쇱쓽/?쒓퀎

-   javalang 誘몄꽕移???Java ?뚯떛 ?ㅽ궢?????덉쓬(requirements ?ㅼ튂 ?꾩슂)
-   DB_SCHEMA CSV媛 異⑸텇?섏? ?딆쑝硫?PK 援먯감寃利?寃곌낵媛 ?щ씪吏????덉쓬
-   v1.4?먯꽌 異붽???DynamicSqlResolver??lxml???꾩슂??

---

## 6. Source Analyzer Visualization Testcases (From testcase/visualize/testcase.md)

蹂?臾몄꽌??Visualize_Implementation_Plan_v001.md??援ы쁽 ?꾨즺 ??湲곕뒫 寃利앹쓣 ?꾪븳 ?뚯뒪???쒕굹由ъ삤?낅땲?? 媛쒕컻?먮뒗 .md ?ㅺ퀎瑜??숈??섍퀬 ?덉쑝硫? ?꾨옒 耳?댁뒪???ㅼ젣 ?ㅽ뻾 愿?먯뿉???묒꽦?섏뿀?듬땲??

二쇱쓽: 蹂?臾몄꽌??援ы쁽 ?꾨즺 ???섑뻾???꾩젣濡??섎ŉ, `visualize` CLI? 鍮뚮뜑/?쒗뵆由우씠 ?숈옉?쒕떎??媛?뺥븯??湲곗닠?⑸땲??

### 6.0. ?ъ쟾 以鍮?

-   Python 3.10+, `pip install -r requirements.txt`
-   ?ㅼ젙 ?뚯씪: `config/config.yaml` (湲곕낯 洹몃?濡??ъ슜)
-   硫뷀?DB 珥덇린?붿슜 遺꾩꽍 ?ㅽ뻾:
    -   紐낅졊: `python phase1/src/main.py PROJECT/sampleSrc --project-name sample --config config/config.yaml`
    -   湲곕?: `data/metadata.db` ?앹꽦, 濡쒓렇??`logs/analyzer.log`
-   ?깃났 湲곗?(???:
    -   ?꾨줈?앺듃/?뚯씪/SQL ?⑥쐞媛 DB???곸옱??
    -   `joins`, `required_filters`, `db_tables`, `db_pk` ?깆씠 議댁옱

### 6.1. ERD ?쒕굹由ъ삤

TC-ERD-01 湲곕낯 ERD ?앹꽦
-   紐⑹쟻: ?꾩껜 ?뚯씠釉?湲곕컲 ERD ?앹꽦
-   紐낅졊: `python -m visualize erd --project-id 1 --out output/visualize/erd_all.html`
-   湲곕?:
    -   HTML ?뚯씪 ?앹꽦, ?뚯씠釉??몃뱶 ?ㅼ닔 ?쒖떆
    -   ?몃뱶 ?쇰꺼: `OWNER.TABLE` ?뺤떇(?臾몄옄)

TC-ERD-02 ?뚯쑀???뚯씠釉??꾪꽣
-   紐⑹쟻: ?뱀젙 ?ㅻ꼫/?뚯씠釉붾쭔 ?쒗쁽
-   紐낅졊: `python -m visualize erd --project-id 1 --owners SAMPLE --tables USERS,ORDERS --out output/visualize/erd_subset.html`
-   湲곕?: `SAMPLE.USERS`, `SAMPLE.ORDERS` ?몃뱶留?議댁옱, 湲고? ?몃뱶???놁쓬

TC-ERD-03 FK 異붾줎 ?쒓컖??
-   紐⑹쟻: 議곗씤 ?⑦꽩 湲곕컲 FK 異붾줎 ?ｌ? ?뺤씤
-   紐낅졊: `python -m visualize erd --project-id 1 --out output/visualize/erd_fk.html`
-   湲곕?:
    -   `fk_inferred` ?ｌ?媛 ?쒖떆?섍퀬, confidence>0.85???ｌ???吏꾪븳 ??援듦린
    -   ?숈씪 ?뚯씠釉??섏뼱??蹂듭닔 而щ읆 議곗씤(蹂듯빀???꾨낫) ??confidence媛 ?뚰룺 ?곹뼢

TC-ERD-04 SQL 湲곕컲 遺遺?ERD
-   紐⑹쟻: ?뱀젙 荑쇰━媛 李몄“?섎뒗 ?뚯씠釉붾쭔 遺遺?ERD ?앹꽦
-   紐낅졊 ?? `python -m visualize erd --project-id 1 --from-sql UserMapper:selectUser --out output/visualize/erd_from_sql.html`
-   湲곕?: ?대떦 SQL??李몄“?섎뒗 ?뚯씠釉붾쭔 ?몃뱶濡??쒖떆

### 6.2. ?섏〈??洹몃옒???쒕굹由ъ삤

TC-GRAPH-01 ?뚯씠釉??ъ슜 洹몃옒??
-   紐⑹쟻: SQL?뭈ABLE ?섏〈 ?뺤씤
-   紐낅졊: `python -m visualize graph --project-id 1 --kinds use_table --out output/visualize/graph_use_table.html`
-   湲곕?: `sql` ????몃뱶?먯꽌 `table` ?몃뱶濡??ν븯???ｌ? 議댁옱

TC-GRAPH-02 include 洹몃옒??
-   紐⑹쟻: JSP/JSP 諛?MyBatis include ?ｌ? ?쒖떆
-   紐낅졊: `python -m visualize graph --project-id 1 --kinds include --out output/visualize/graph_include.html`
-   湲곕?: ?뚯씪 媛?include ?ｌ? 議댁옱(酉곗뼱 ?대┃ ?????寃쎈줈 ?쒖떆)

TC-GRAPH-03 confidence ?꾪꽣
-   紐⑹쟻: `--min-confidence` ?곸슜 ?뺤씤
-   紐낅졊: `python -m visualize graph --project-id 1 --kinds use_table,include --min-confidence 0.9 --out output/visualize/graph_conf90.html`
-   湲곕?: ??? ?좊ː?꾩쓽 ?ｌ????쒖쇅?섏뼱 洹몃옒?꾧? 媛꾧껐?댁쭚

TC-GRAPH-04 ?ъ빱??源딆씠 ?쒗븳
-   紐⑹쟻: ?뱀젙 ?몃뱶瑜?湲곗??쇰줈 BFS ?쒗븳 ?곸슜
-   紐낅졊: `python -m visualize graph --project-id 1 --kinds use_table --focus SAMPLE.USERS --depth 1 --out output/visualize/graph_focus_users.html`
-   湲곕?: `SAMPLE.USERS`? 1?④퀎 ?댁썐留??쒖떆

TC-GRAPH-05 ?몃뱶 ?곹븳(max_nodes)
-   紐⑹쟻: ?洹쒕え 洹몃옒???곹븳 ?곸슜 ?뺤씤
-   紐낅졊: `python -m visualize graph --project-id 1 --kinds use_table,include --max-nodes 200 --out output/visualize/graph_cap200.html`
-   湲곕?: 200媛????몃뱶濡??섎┝(?대컮/寃쎄퀬 ?쒖떆)

### 6.3. 而댄룷?뚰듃 ?ㅼ씠?닿렇???쒕굹由ъ삤

TC-COMP-01 湲곕낯 而댄룷?뚰듃 ?쒖떆
-   紐⑹쟻: 洹쒖튃 湲곕컲 洹몃９???뺤씤
-   紐낅졊: `python -m visualize component --project-id 1 --out output/visualize/components.html`
-   湲곕?:
    -   而⑦듃濡ㅻ윭/?쒕퉬???덊룷吏?좊━/留ㅽ띁/JSP/DB 洹몃９ ?몃뱶 ??援щ텇
    -   援먯감 而댄룷?뚰듃 ?ｌ?(吏묎퀎) ?쒖떆, ?댄똻??吏묎퀎 ???됯퇏 confidence

TC-COMP-02 洹쒖튃 ?쒕떇
-   紐⑹쟻: 洹쒖튃 蹂寃???洹몃９??蹂???뺤씤
-   ?덉감: `config/config.yaml`??`visualize.component_rules` 異붽?/?섏젙 ???ъ떎??
-   湲곕?: ?대떦 洹쒖튃???곕씪 洹몃９ 諛곗젙???щ씪吏?

### 6.4. ?쒗???먮쫫) ?ㅼ씠?닿렇???쒕굹由ъ삤

TC-SEQ-01 JSP 以묒떖 ?먮쫫
-   紐⑹쟻: JSP?뭆QL?뭈ABLE ?먮쫫 ?쒖떆
-   紐낅졊: `python -m visualize sequence --project-id 1 --start-file PROJECT/sampleSrc/src/main/webapp/WEB-INF/jsp/user/userList.jsp --out output/visualize/seq_jsp.html`
-   湲곕?: ?쒖옉 JSP?먯꽌 愿??SQL, 洹?SQL??李몄“?섎뒗 TABLE濡쒖쓽 ?먮쫫???덉씠?대줈 諛곗튂

TC-SEQ-02 硫붿꽌???몄텧 諛섏쁺(蹂닿컯 ??
-   紐⑹쟻: Java call ?댁냼 ??Controller?뭆ervice?뭃epository/Mapper ?먮쫫 ?ы븿
-   紐낅졊: `python -m visualize sequence --project-id 1 --start-method com.example.service.UserService.listUsers --depth 3 --out output/visualize/seq_java.html`
-   湲곕?: 硫붿꽌??媛?call 泥댁씤???쒓컙異??좎궗 怨꾩링?쇰줈 ?쒗쁽(誘명빐???몄텧? ??? confidence ?먮뒗 ?먯꽑 ?ㅽ???

### 6.5. 硫뷀? 蹂닿컯 湲곕뒫 ?쒕굹由ъ삤

TC-META-01 edge_hints ?앹꽦/?뚮퉬(硫붿꽌???몄텧)
-   紐⑹쟻: ?뚯꽌?뭙dge_hints?뭙dges(call) ?뚯씠?꾨씪??寃利?
-   ?덉감:
    1)  遺꾩꽍 ?ㅽ뻾 ??`data/metadata.db` ??젣(?좉퇋 遺꾩꽍)
    2)  遺꾩꽍 ?ㅽ뻾 ??DB ?뺤씤: `edge_hints(hint_type='method_call')` 議댁옱
    3)  `build_dependency_graph()` ?섑뻾(遺꾩꽍 怨쇱젙?먯꽌 ?먮룞)
    4)  DB ?뺤씤: `edges(edge_kind='call', dst_id not null)` 利앷?, ?대떦 `edge_hints`????젣??
-   湲곕?: call ?ｌ?媛 ?앹꽦?섍퀬 hints???뚮퉬??

TC-META-02 include ?뚰듃 ?댁냼
-   紐⑹쟻: JSP include ?뚰듃?뭝nclude ?ｌ? 寃利?
-   ?덉감: ?꾩? ?숈씪 ?뚮줈?곕줈 `edge_hints('jsp_include')`媛 `edges('include')`濡??꾪솚?섎뒗吏 ?뺤씤

### 6.6. SQL 議곗씤???꾩텧 媛뺥솕 ?쒕굹由ъ삤

TC-JOIN-01 蹂꾩묶(alias) ?댁냼
-   紐⑹쟻: `a.id=b.user_id` ?뺥깭?먯꽌 a,b?뭀WNER.TABLE 移섑솚 ?뺤씤
-   諛⑸쾿: MyBatis XML?대굹 JSP???ㅼ쓬怨??좎궗???뚯뒪??荑쇰━瑜??꾩떆 異붽? ??遺꾩꽍:
    ```sql
    SELECT * FROM USERS u JOIN ORDERS o ON u.USER_ID = o.USER_ID
    ```
-   湲곕?: `joins`??`SAMPLE.USERS.USER_ID = SAMPLE.ORDERS.USER_ID` ??? ERD??fk_inferred ?꾨낫 ?쒖떆

TC-JOIN-02 ?ㅽ궎留??뺢퇋??
-   紐⑹쟻: `owner.table`/`table` ?쇱옱 ??OWNER ?臾몄옄/?뚯씠釉??臾몄옄濡??뺢퇋??
-   湲곕?: ERD/洹몃옒?꾩쓽 ?뚯씠釉??쇰꺼???쇨??섍쾶 `OWNER.TABLE`

TC-JOIN-03 PK 援먯감寃利?
-   紐⑹쟻: `DbPk` 湲곗??쇰줈 ?쒖そ??PK??議곗씤?먯꽌 inferred_pkfk=1 & confidence ?곹뼢
-   ?덉감: `DB_SCHEMA/PK_INFO.csv`??USERS.USER_ID媛 PK?꾩쓣 ?뺤씤
-   湲곕?: USERS(USER_ID)?봑RDERS(USER_ID) 議곗씤 ??inferred_pkfk=1, confidence??.85

TC-JOIN-04 蹂듯빀??異붾줎
-   紐⑹쟻: ?숈씪 ?섏뼱?먯꽌 ??而щ읆 ?댁긽 議곗씤 ??蹂듯빀???꾨낫 ?곹뼢
-   諛⑸쾿: ?뚯뒪??荑쇰━(?? ORDER_ITEMS(ORDER_ID, PRODUCT_ID)?봑RDERS(ORDER_ID) & PRODUCTS(PRODUCT_ID))瑜??ы븿??留ㅽ띁瑜??꾩떆 異붽?
-   湲곕?: ?숈씪 ?섏뼱 鍮덈룄?? ??confidence ?뚰룺 ?곹뼢, ?ㅽ???諛섏쁺

### 6.7. ?뺥솗???ㅻ쾭濡쒕뱶/?뺤쟻 ?꾪룷???숈쟻 諛붿씤??

TC-CALL-01 ?ㅻ쾭濡쒕뱶 援щ텇
-   紐⑹쟻: ?숈씪 硫붿꽌?쒕챸 ?ㅻⅨ ?쒓렇?덉쿂?먯꽌 arg_count ?곗꽑 留ㅼ묶 ?숈옉 ?뺤씤
-   諛⑸쾿: `UserService`??`find(int id)`/`find(String id)` 議댁옱 ?? ?몄텧 ?몄옄 ?좏삎???곕씪 ?ㅻⅨ ???留ㅼ묶 ?щ? ?뺤씤
-   湲곕?: ?몄옄 ???좏삎??留욌뒗 硫붿꽌?쒕줈 ?곗꽑 ?곌껐(confidence 媛以묒튂 ?곹뼢)

TC-CALL-02 ?뺤쟻 ?꾪룷??
-   紐⑹쟻: qualifier ?녿뒗 ?몄텧??static import???좏떥濡??곌껐?섎뒗吏 ?뺤씤
-   諛⑸쾿: `import static com.example.util.Texts.isEmpty;` ??`isEmpty(name)` ?몄텧
-   湲곕?: `Texts.isEmpty`濡?resolve ?먮뒗 ?꾨낫 ?ㅼ쨷 ?앹꽦(??? confidence)

TC-CALL-03 ?숈쟻 諛붿씤??
-   紐⑹쟻: ?명꽣?섏씠??????섏떊?먯쓽 援ы쁽 ?꾨낫 遺꾩궛 ?곌껐
-   諛⑸쾿: `ListService` ?명꽣?섏씠?ㅼ? `ListServiceImpl1/2` 援ы쁽, ?몄텧 ????援ы쁽 以??꾨낫 ?ｌ? ?앹꽦
-   湲곕?: 蹂듭닔 call ?ｌ? ?앹꽦, confidence 遺꾩궛(?? 0.5/媛쒖닔)

### 6.8. Confidence/?꾪꽣留??깅뒫

TC-CF-01 min-confidence ?꾪꽣留?
-   紐⑹쟻: ??? ?좊ː???ｌ? ?쒓굅 ?뺤씤(洹몃옒??媛꾧껐??
-   紐낅졊: `--min-confidence 0.9` vs `0.5` 鍮꾧탳
-   湲곕?: 0.9?먯꽌 ?ｌ? ?섍? ?꾩???媛먯냼

TC-CF-02 suspect 留덊궧 ?좎?
-   紐⑹쟻: `_SUSPECT` stmt_id ?ы븿 ?щ? 諛??쒓컖???쇰꺼 ?뺤씤
-   湲곕?: ?쇰꺼??`_SUSPECT` ?묐????쒓린 ?먮뒗 ?ㅻⅨ ?ㅽ????곸슜

TC-PERF-01 ?몃뱶 cap ?깅뒫 ?뺤씤
-   紐⑹쟻: 1000+ ?몃뱶 ???덉씠?꾩썐 ?쒓컙/?곹샇?묒슜 ?뺤씤
-   紐낅졊: `--max-nodes 500`/`2000` 蹂寃쏀븯??諛섏쓳??鍮꾧탳
-   湲곕?: cap????쓣?섎줉 ?뚮뜑媛 鍮⑤씪吏?

### 6.9. PNG Export

TC-PNG-01 PNG ?대낫?닿린
-   紐⑹쟻: 酉곗뼱 踰꾪듉?쇰줈 PNG ????뺤씤
-   ?덉감: ?꾩쓽 洹몃옒???닿린 ??`Export PNG` ?대┃ ???뚯씪 ????뺤씤
-   湲곕?: `graph.png` ?ㅼ슫濡쒕뱶, ?댁긽??scale=2) ?곸슜??

### 6.10. ?덉쇅/?먯? 耳?댁뒪

TC-EX-01 DB ?ㅽ궎留?誘몄〈??
-   紐⑹쟻: DB_SCHEMA ?꾨씫 ???덉쟾??寃쎄퀬/?숈옉 ?뺤씤
-   ?덉감: ?꾩떆濡?DB_SCHEMA 寃쎈줈瑜?鍮꾩슦怨?遺꾩꽍
-   湲곕?: 寃쎄퀬 濡쒓렇 ??怨꾩냽 吏꾪뻾, ERD??鍮꾩뼱 ?덇굅???쒗븳?곸쑝濡??앹꽦

TC-EX-02 ?섎せ??owners/tables ?몄옄
-   紐⑹쟻: 議댁옱?섏? ?딅뒗 ?뚯씠釉??꾪꽣 吏????鍮?洹몃옒??泥섎━
-   湲곕?: 鍮??몃뱶/?ｌ?濡?HTML ?앹꽦?섎릺 ?ㅻ쪟 ?놁씠 濡쒕뵫??

---

## 7. 寃利??덉퐫??媛?대뱶 (From testcase/visualize/testcase.md)

-   媛?耳?댁뒪 ?섑뻾 ??`output/visualize/*.html` ?ㅻ깄??蹂닿?
-   ?꾩슂 ??釉뚮씪?곗? 肄섏넄??`DATA.nodes.length`, `DATA.edges.length`濡?媛쒖닔 ?뺤씤
-   DB ?뺤씤? `sqlite3 data/metadata.db` ?먮뒗 DB ?대씪?댁뼵???ъ슜

