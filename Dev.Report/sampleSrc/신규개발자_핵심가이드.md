# 🚀 신규 개발자 핵심 가이드

## 📋 주요 비즈니스 플로우

### 🛒 주문 생성 플로우
```
HTTP POST /api/orders
↓
OrderController.createOrder()  (32라인)
├── UserService.getUserById()     // 사용자 검증
├── ProductService.getProductById() // 상품/재고 검증  
└── OrderService.createOrder()     // 주문 생성
    └── OrderMapper.insertOrder() // DB 저장
```

### 🔍 주문 조회 플로우
```
HTTP GET /api/orders/{id}
↓
OrderController.getOrderById() (95라인)
└── OrderService.getOrderById()
    └── OrderMapper.selectOrderById() // JOIN 쿼리
```

### 💰 결제 처리 플로우
```
HTTP POST /api/payments/process
↓
PaymentController.processPayment() (29라인)
└── PaymentService.processPayment()
    ├── OrderService.validateOrder()  // 주문 유효성
    ├── PaymentGateway.charge()      // 외부 결제
    └── OrderService.updateStatus()   // 상태 업데이트
```

## 🔍 빠른 찾기 가이드

### "XX 기능 수정하려면 어느 파일?"

| 기능 | Controller | Service | Mapper/XML |
|------|------------|---------|------------|
| 주문 관리 | `OrderController.java` | `OrderService.java` | `OrderMapper.xml` |
| 결제 처리 | `PaymentController.java` | `PaymentService.java` | `PaymentMapper.xml` |
| 사용자 관리 | `MainController.java` | `UserService.java` | `UserMapper.xml` |
| API 공통 | `ApiController.java` | - | - |

### 에러 발생시 체크 포인트
1. **400 에러** → Controller 파라미터 검증
2. **500 에러** → Service 로직 or DB 쿼리 확인
3. **DB 에러** → MyBatis XML 쿼리 검토
4. **트랜잭션 에러** → @Transactional 설정 확인

## ⚡ 자주 쓰는 쿼리/API 참조

### 📌 공통 CRUD 패턴

#### 단건 조회 (ID 기반)
```xml
<select id="selectById" parameterType="String" resultType="VO클래스">
    SELECT <include refid="기본컬럼들"/>
    FROM 테이블명
    WHERE id = #{id} AND del_yn = 'N'
</select>
```

#### 목록 조회 (조건 기반)
```xml
<select id="selectByStatus" parameterType="String" resultType="VO클래스">
    SELECT <include refid="기본컬럼들"/>
    FROM 테이블명  
    WHERE status = #{status} AND del_yn = 'N'
    ORDER BY created_date DESC
</select>
```

#### JOIN 조회 (관계 테이블)
```xml
<select id="selectWithJoin" resultType="VO클래스">
    SELECT 
        <include refid="주테이블컬럼들"/>,
        <include refid="관계테이블컬럼들"/>
    FROM 주테이블 m
    LEFT JOIN 관계테이블 s ON m.id = s.주테이블_id
    WHERE m.del_yn = 'N'
</select>
```

### 📊 자주 사용하는 API 엔드포인트

| HTTP 메서드 | 경로 | 용도 | Controller:라인 |
|-------------|------|------|----------------|
| GET | `/api/orders` | 주문 목록 | OrderController:68 |
| POST | `/api/orders` | 주문 생성 | OrderController:31 |
| GET | `/api/orders/{id}` | 주문 상세 | OrderController:95 |
| POST | `/api/payments/process` | 결제 처리 | PaymentController:29 |
| GET | `/api/payments/{id}/status` | 결제 상태 | PaymentController:77 |

## 🔎 코드 리뷰 체크포인트

### ✅ 필수 점검 사항

#### 1. **Controller 계층**
- [ ] `@RestController` + `@RequestMapping` 설정
- [ ] 파라미터 검증 (`@RequestBody`, `@PathVariable`)
- [ ] 예외 처리 (`try-catch` 또는 `@ExceptionHandler`)
- [ ] HTTP 응답 코드 적절성

#### 2. **Service 계층** 
- [ ] `@Service` + `@Transactional` 설정
- [ ] 비즈니스 로직 검증 (null 체크, 권한 확인)
- [ ] 예외 던지기 (`IllegalArgumentException` 등)
- [ ] Mapper 호출 패턴 일관성

#### 3. **MyBatis XML**
- [ ] SQL injection 방지 (`#{parameter}` 사용)
- [ ] JOIN 조건 명시성
- [ ] `del_yn = 'N'` 조건 포함 (논리 삭제)
- [ ] 컬럼명 include 활용

#### 4. **공통 패턴**
- [ ] 네이밍 규칙: `selectById`, `updateStatus`, `deleteById`
- [ ] 로그 삭제 검증: `del_yn = 'N'` 조건
- [ ] 트랜잭션 범위: Service 단위
- [ ] 예외 전파: Controller에서 최종 처리

### 🚨 자주 놓치는 포인트
1. **NULL 체크 누락** → `if (object == null)` 추가
2. **트랜잭션 범위 애매** → `@Transactional` 명시
3. **SQL injection 위험** → `${}` 대신 `#{}` 사용
4. **논리삭제 조건 누락** → `AND del_yn = 'N'` 추가
5. **예외 처리 생략** → 적절한 예외 타입으로 던지기

---
*생성일: 2025-09-04*  
*기반: sampleSrc 프로젝트 소스 분석*