# A_20250906_1030_CSV파일존재하지만DB테이블0건문제

## 답변

`output/` 폴더에 CSV 파일이 존재함에도 불구하고 `check_metadb.py`에서 0건으로 조회되는 현상은 주로 다음과 같은 원인으로 발생할 수 있습니다.

1.  **스크립트 실행 디렉토리 불일치:**
    *   `upgrade_db_schema.py` (CSV 데이터를 데이터베이스로 로드하는 스크립트)와 `check_metadb.py` (데이터베이스 내용을 확인하는 스크립트)가 서로 다른 작업 디렉토리에서 실행되고 있을 가능성이 높습니다.
    *   두 스크립트 모두 `metadb.sqlite` 파일을 현재 작업 디렉토리에서 찾거나 생성하도록 설계되어 있습니다. 만약 `upgrade_db_schema.py`가 `output/` 폴더가 있는 디렉토리에서 실행되어 `metadb.sqlite`를 성공적으로 업데이트했지만, `check_metadb.py`가 다른 디렉토리에서 실행되어 업데이트되지 않은 다른 `metadb.sqlite` 파일을 참조하고 있다면 0건으로 조회될 것입니다.

2.  **데이터 로드 프로세스 실패 또는 미실행:**
    *   `upgrade_db_schema.py` 스크립트가 실행되지 않았거나, CSV 파일을 데이터베이스로 로드하는 과정에서 오류가 발생하여 데이터가 제대로 삽입되지 않았을 수 있습니다.
    *   때로는 오류 메시지가 명확하게 출력되지 않고 조용히 실패하는 경우도 있습니다.

## 문제 해결을 위한 확인 사항

다음 단계를 통해 문제의 원인을 파악하고 해결할 수 있습니다.

1.  **스크립트 실행 환경 확인:**
    *   `upgrade_db_schema.py`와 `check_metadb.py`를 실행할 때, **두 스크립트가 동일한 작업 디렉토리에서 실행되고 있는지** 확인해 주십시오.
    *   특히, `output/` 폴더와 `metadb.sqlite` 파일이 모두 동일한 상대 경로에 위치하는 디렉토리(예: 프로젝트의 루트 디렉토리)에서 실행되어야 합니다.

2.  **`upgrade_db_schema.py` 실행 시 콘솔 출력 확인:**
    *   `upgrade_db_schema.py`를 실행할 때 콘솔에 출력되는 메시지를 자세히 확인해 주십시오.
    *   CSV 파일 로드 또는 데이터베이스 작업 관련 오류 메시지(`Database error`, `An unexpected error occurred`, `CSV file not found` 등)가 있는지 살펴보아야 합니다.

3.  **`metadb.sqlite` 파일 상태 확인:**
    *   `upgrade_db_schema.py` 실행 후, `metadb.sqlite` 파일이 예상되는 위치(스크립트가 실행된 디렉토리)에 생성되었는지, 그리고 파일 크기가 증가했는지 확인하여 데이터가 실제로 기록되었는지 검증해 주십시오. 파일 크기가 0이거나 매우 작다면 데이터가 로드되지 않은 것입니다.

이러한 확인을 통해 문제의 원인을 더 정확히 파악하고 해결할 수 있을 것입니다.
