# Q_20250905_2057_메서드추출패턴미적용.md

## 문제 상황

A 답변파일 `A_20250905_2030_메서드과소추출.md`의 개선 방안을 모두 적용했음에도 불구하고 메서드 추출이 여전히 44.2% 부족한 문제가 지속되고 있습니다.

## 전후 배경

### **개선 작업 완료 사항**
1. ✅ 메서드 패턴 확장 (인터페이스 추상 메서드, 접근제한자 확장)
2. ✅ 메서드 길이 제한 완화 (500자 → 2000자)
3. ✅ 스마트 getter/setter 필터링 로직 추가
4. ✅ MyBatis 어노테이션 메서드 패턴 추가

### **현재 상황**
- **메서드 추출**: 43개 (명세서 77개 대비 44.2% 부족)
- **패턴 적용**: 새로운 패턴들이 실제로 적용되지 않음
- **인터페이스 메서드**: 여전히 추출되지 않음

## 구체적 문제 사례

### **사례 1: UserService.java 인터페이스**
```java
// 실제 소스코드 (6개 추상 메서드)
public interface UserService {
    List<User> getUserById(Long id);
    List<User> getUsersByCondition(UserSearchCondition condition);
    List<User> getUsersByAdvancedCondition(UserAdvancedSearchCondition condition);
    List<User> getUsersByType(String userType);
    int countUsersByCondition(UserSearchCondition condition);
    void updateUserStatus(Long userId, String status);
}
```

**현재 추출 결과**: 0개 메서드
**예상 추출 결과**: 6개 메서드 (추상 메서드 패턴 적용 시)

### **사례 2: UserMapper.java 매퍼 인터페이스**
```java
// 실제 소스코드 (8개 MyBatis 메서드)
@Mapper
public interface UserMapper {
    @Select("SELECT * FROM users WHERE id = #{id}")
    User selectUserById(Long id);
    
    @Insert("INSERT INTO users (name, email) VALUES (#{name}, #{email})")
    void insertUser(User user);
    
    // ... 6개 추가 메서드
}
```

**현재 추출 결과**: 0개 메서드
**예상 추출 결과**: 8개 메서드 (MyBatis 어노테이션 패턴 적용 시)

### **사례 3: UserController.java 복잡한 메서드**
```java
// 실제 소스코드 (3개 복잡한 메서드)
public class UserController {
    public List<User> getUserList() {
        // 42줄의 복잡한 비즈니스 로직
        // 길이 제한 완화 후에도 추출되지 않음
    }
    
    public List<User> searchUsers() {
        // 32줄의 복잡한 비즈니스 로직
        // 길이 제한 완화 후에도 추출되지 않음
    }
}
```

**현재 추출 결과**: 0개 메서드
**예상 추출 결과**: 3개 메서드 (길이 제한 완화 적용 시)

## 의심 원인

### **🔴 원인 1: 패턴 적용 실패**
- 새로운 메서드 패턴이 `_extract_methods_aggressive()` 메서드에 추가되었지만
- 실제 파싱 시 기존 패턴만 사용되고 있을 가능성

### **🔴 원인 2: 정규식 패턴 오류**
- 인터페이스 추상 메서드 패턴의 정규식이 잘못되었을 가능성
- MyBatis 어노테이션 패턴이 실제 소스와 매칭되지 않을 가능성

### **🔴 원인 3: 메서드 필터링 로직 오류**
- 스마트 getter/setter 필터링이 오히려 비즈니스 메서드를 제외할 가능성
- 중복 제거 로직이 새로운 메서드들을 제거할 가능성

### **🔴 원인 4: 파서 호출 문제**
- 개선된 Java 파서가 실제로 호출되지 않고 기존 파서가 사용될 가능성
- 파서 초기화 과정에서 문제가 있을 가능성

## 핵심 질문

**메서드 추출 패턴을 모두 개선했음에도 불구하고 추출 결과가 개선되지 않는 근본 원인은 무엇인가요?**

1. **패턴 적용 실패**: 새로운 메서드 패턴이 실제 파싱에 적용되지 않는가?
2. **정규식 오류**: 인터페이스/MyBatis 메서드 패턴의 정규식이 잘못되었는가?
3. **필터링 로직 오류**: 스마트 필터링이 오히려 메서드를 제외하는가?
4. **파서 호출 문제**: 개선된 파서가 실제로 사용되지 않는가?

## 예상 효과

### **해결 시 기대 결과**
- **METHODS**: 43개 → 77개 (100% 달성)
- **인터페이스 메서드**: 0개 → 14개 (UserService 6개 + UserMapper 8개)
- **복잡한 비즈니스 메서드**: 0개 → 3개 (UserController)
- **메서드 추출률**: 55.8% → 100%

### **부가 효과**
- MyBatis 매퍼 메서드 완전 추출
- 인터페이스-구현체 관계 정확한 매핑
- 비즈니스 로직 메서드 완전 추적

---

**질의 생성일시**: 2025-09-05 20:57:00  
**질의자**: SourceAnalyzer Technical Team  
**상태**: ✅ A 답변파일 기반 개선 완료, 패턴 적용 확인 필요  
**우선순위**: High (메서드 추출 44.2% 부족)  
**예상 해결 시간**: 1시간 (패턴 검증 및 수정)


