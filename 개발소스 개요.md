# SourceAnalyzer 개발소스 개요

이 문서는 SourceAnalyzer 프로젝트의 폴더 구조와 주요 소스 파일을 요약한 것입니다.

## 📁 최상위 디렉토리 구조

```
SourceAnalyzer/
├── phase1/                          # 핵심 분석 엔진
├── visualize/                       # 시각화 엔진  
├── web-dashboard/                   # 웹 대시보드 (선택)
├── testcase/sampleSrc/             # 테스트용 샘플 프로젝트
├── config/                         # 설정 파일
├── output/                         # 분석 결과 출력
├── venvSrcAnalyzer/               # Python 가상환경
└── *.bat                          # 실행 스크립트
```

## 🚀 Phase1 - 핵심 분석 엔진

### 진입점 및 코어
- **`main.py`** - 메인 진입점. 설정 로드, 파서 초기화, 프로젝트 분석 총괄
- **`llm_cli.py`** - LLM 기반 분석을 위한 CLI 인터페이스
- **`core/parallel_processor.py`** - 멀티코어 활용 병렬 파일 처리
- **`core/db_comment_loader.py`** - 데이터베이스 주석 및 메타데이터 로드

### 데이터베이스 계층
- **`models/database.py`** - SQLite 데이터베이스 관리 및 ORM 헬퍼
- **`database/metadata_engine.py`** - 메타데이터 추출 및 저장 엔진
- **`database/metadata_enhancement_engine.py`** - 메타데이터 후처리 및 품질 향상

### 파서 모듈
- **`parsers/java_parser.py`** - Java 클래스, 메서드, 의존성 파싱
- **`parsers/jsp_mybatis_parser.py`** - JSP 및 MyBatis SQL 구문 파싱
- **`parsers/sql_parser.py`** - SQL DDL/DML 구문 분석
- **`parsers/jar_parser.py`** - JAR 파일 내 클래스 구조 분석

### LLM 통합 모듈
- **`llm/client.py`** - Claude, GPT API 클라이언트
- **`llm/summarizer.py`** - 코드 요약 및 자연어 설명 생성  
- **`llm/enricher.py`** - 메타데이터 보강 및 추론
- **`llm/prompt_templates.py`** - 프롬프트 템플릿 관리

### 도구 및 유틸리티
- **`tools/llm_analyzer.py`** - LLM 분석 CLI 도구
- **`tools/enrich_run.py`** - 메타데이터 보강 실행기
- **`tools/metrics.py`** - 분석 품질 메트릭 계산
- **`utils/logger.py`** - 로깅 시스템
- **`utils/confidence_calculator.py`** - 신뢰도 점수 계산

### 보안 및 검증
- **`security/vulnerability_detector.py`** - CWE 기반 취약점 검출
- **`validation/data_quality_validator.py`** - 데이터 품질 검증
- **`monitoring/silent_failure_detector.py`** - 무음 실패 감지

## 🎨 Visualize - 시각화 엔진

### 시각화 빌더
- **`builders/erd.py`** - Entity Relationship Diagram 생성
- **`builders/erd_enhanced.py`** - 고도화된 ERD (툴팁, 조인 관계선)
- **`builders/dependency_graph.py`** - 의존성 그래프 생성
- **`builders/class_diagram.py`** - 클래스 다이어그램 생성
- **`builders/sequence_diagram.py`** - 기본 시퀀스 다이어그램
- **`builders/enhanced_sequence_diagram.py`** - 자동 시퀀스 다이어그램
- **`builders/component_diagram.py`** - 컴포넌트 다이어그램

### 렌더링 및 출력
- **`renderers/enhanced_renderer_factory.py`** - HTML 렌더러 팩토리
- **`renderers/layout_algorithms.py`** - 그래프 레이아웃 알고리즘
- **`exporters/mermaid_exporter.py`** - Mermaid 다이어그램 출력
- **`templates/render.py`** - HTML 템플릿 렌더링

### 데이터 접근 및 분석
- **`data_access.py`** - 데이터베이스 쿼리 및 데이터 접근 계층
- **`clustering.py`** - 노드 클러스터링 알고리즘
- **`analyzers/relationship_analyzer.py`** - 관계 분석기

### CLI 인터페이스
- **`cli.py`** - 시각화 CLI 메인 인터페이스
- **`schema.py`** - 데이터 스키마 정의

## 🌐 Web Dashboard (선택)

### 백엔드 (Flask)
- **`backend/app.py`** - Flask 애플리케이션 메인
- **`backend/api/`** - REST API 엔드포인트
- **`backend/services/`** - 비즈니스 로직 서비스

### 프런트엔드 (React)
- **`frontend/src/components/`** - React 컴포넌트
- **`frontend/src/services/`** - API 클라이언트
- **`frontend/src/utils/`** - 유틸리티 함수

## 🔧 설정 및 스크립트

### 주요 실행 스크립트
- **`run_quick_demo.bat`** - 전체 기능 데모 (권장)
- **`run_analyzer.bat`** - 소스코드 기본 분석
- **`run_complete_analysis.bat`** - 통합 분석 (분석+LLM+시각화)
- **`run_llm_analysis.bat`** - LLM 기반 고급 분석
- **`run_enhanced_visualize_only.bat`** - 고도화된 시각화 생성
- **`run_download_vulnerability_docs.bat`** - 보안 문서 생성

### 개별 기능 스크립트
- **`run_summarize.bat`** - 코드 요약 생성
- **`run_analyze_joins.bat`** - 테이블 조인 관계 분석
- **`run_auto_sequence.bat`** - 자동 시퀀스 다이어그램
- **`run_relationships.bat`** - 관계 분석

### 설정 파일
- **`config/config.yaml`** - 메인 설정 파일
- **`requirements.txt`** - Python 의존성 목록

## 📊 테스트 및 샘플

### 테스트 케이스
- **`testcase/sampleSrc/`** - Java/Spring/MyBatis 샘플 프로젝트
  - `src/main/java/` - Java 소스코드
  - `src/main/resources/` - MyBatis XML, 설정 파일
  - `src/main/webapp/` - JSP 파일

### 유틸리티 스크립트
- **`auto_sequence_runner.py`** - 자동 시퀀스 다이어그램 실행기
- **`debug_database.py`** - 데이터베이스 디버깅 도구
- **`generate_enhanced_erd.py`** - 고도화된 ERD 생성기
- **`generate_lists.py`** - 목록 생성 유틸리티
- **`download_vulnerability_docs.py`** - 보안 문서 다운로더

## 🔄 데이터 플로우

```
소스코드 → Phase1 분석 → 메타데이터 DB → LLM 보강 → 시각화 생성
    ↓           ↓              ↓           ↓           ↓
  .java       파서           SQLite      요약/명세   HTML/Mermaid
  .jsp        모듈           테이블       자연어      대화형 UI
  .xml        병렬처리       관계정보     추론결과    검색/필터
```

## 🎯 아키텍처 특징

### 모듈화 설계
- **단일 책임**: 각 모듈이 명확한 역할 분담
- **느슨한 결합**: 모듈 간 의존성 최소화
- **확장 가능**: 새로운 언어/프레임워크 파서 추가 용이

### 성능 최적화
- **병렬 처리**: 멀티코어 CPU 활용
- **증분 분석**: 변경된 파일만 재처리
- **메모리 관리**: 대용량 프로젝트 지원

### 사용자 경험
- **원클릭 실행**: 복잡한 설정 없이 바로 사용
- **진행상황 표시**: 실시간 처리 상태 확인
- **오류 복구**: 부분 실패 시에도 가용한 결과 제공

이 구조를 통해 SourceAnalyzer는 확장성, 유지보수성, 사용성을 모두 만족하는 종합적인 소스코드 분석 플랫폼을 구현했습니다.