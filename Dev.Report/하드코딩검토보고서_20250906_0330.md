# 하드코딩 검토 보고서 - SourceAnalyzer 프로젝트

## 📋 개요

**작성일**: 2025-09-06 03:30:00  
**프로젝트**: SourceAnalyzer  
**검토 목적**: 소스 코드 내 하드코딩된 부분 식별 및 개선 방안 제시  
**검토 방법**: 코드베이스 전체 검색 + 파일별 상세 분석

## 🔍 하드코딩 검토 결과

### 1. 프로젝트명 하드코딩

#### 1.1 심각한 하드코딩 사례

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `debug_database.py:25` | `project_name = 'sampleSrc'` | 프로젝트명 고정 | CLI 인자로 받도록 수정 |
| `phase1/temp/run_analyzer.py:21,29,31,32` | `'sampleSrc'` 4회 반복 | 프로젝트명 고정 | 동적 프로젝트명 사용 |
| `temp/check_current_metadata.py:11` | `"./project/sampleSrc/metadata.db"` | DB 경로 고정 | 프로젝트명 변수화 |

#### 1.2 경로 하드코딩 사례

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `phase1/temp/run_analyzer.py:17,18` | `'../config/global_config.yaml'`, `'config/config.yaml'` | 설정 파일 경로 고정 | 상대경로 동적 계산 |
| `phase1/temp/run_analyzer.py:29` | `'../project/sampleSrc'` | 프로젝트 경로 고정 | 프로젝트명 기반 동적 경로 |

### 2. 데이터베이스 스키마 하드코딩

#### 2.1 스키마명 하드코딩

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `phase1/config/config.yaml:10,15` | `default_schema: "SAMPLE"` | 스키마명 고정 | 설정 파일에서 동적 로드 |
| `phase1/utils/edge_generator.py:443` | `'SAMPLE'` | 기본 owner 고정 | 설정 기반 동적 할당 |

#### 2.2 테스트 파일의 하드코딩

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `phase1/temp/verification/debug_jsp_mybatis_parser.py:17` | `'default_owner': 'DEFAULT'` | 테스트용 owner 고정 | 테스트 설정 분리 |
| `phase1/temp/verification/debug_xml_processing.py:15` | `'default_owner': 'DEFAULT'` | 테스트용 owner 고정 | 테스트 설정 분리 |

### 3. 경로 하드코딩

#### 3.1 상대경로 하드코딩

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `phase1/config/config.yaml:17,21` | `"../project/{project_name}/metadata.db"`, `"./project/{project_name}/metadata.db"` | 경로 템플릿 중복 | 통일된 경로 템플릿 사용 |
| `phase1/config/config.yaml:103` | `"../logs/phase1_{timestamp}.log"` | 로그 경로 고정 | 설정 기반 동적 경로 |
| `phase1/config/config.yaml:149` | `../project/{project_name}/llm_cache` | 캐시 경로 고정 | 설정 기반 동적 경로 |

#### 3.2 절대경로 하드코딩

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `backup/old.output/sampleSrc/visualize/*.html` | `E:\SourceAnalyzer.git\...` | 절대경로 고정 | 상대경로로 변경 |

### 4. 설정 파일 하드코딩

#### 4.1 설정 파일 경로 하드코딩

| 파일 경로 | 하드코딩 내용 | 문제점 | 개선 방안 |
|-----------|---------------|--------|-----------|
| `auto_sequence_runner.py:158` | `Path('config/config.yaml')` | 설정 파일 경로 고정 | 환경변수 또는 인자로 받기 |
| `debug_database.py:28` | `Path('config/config.yaml')` | 설정 파일 경로 고정 | 동적 설정 파일 경로 |

## 📊 하드코딩 심각도 분석

### 심각도별 분류

#### 🔴 심각 (Critical) - 즉시 수정 필요
1. **프로젝트명 하드코딩**: `debug_database.py`, `phase1/temp/run_analyzer.py`
2. **DB 경로 하드코딩**: `temp/check_current_metadata.py`
3. **절대경로 하드코딩**: `backup/old.output/sampleSrc/visualize/*.html`

#### 🟡 중간 (Medium) - 단기 수정 필요
1. **스키마명 하드코딩**: `phase1/config/config.yaml`, `phase1/utils/edge_generator.py`
2. **설정 파일 경로 하드코딩**: `auto_sequence_runner.py`, `debug_database.py`

#### 🟢 낮음 (Low) - 장기 개선 필요
1. **테스트 파일 하드코딩**: `phase1/temp/verification/*.py`
2. **경로 템플릿 중복**: `phase1/config/config.yaml`

## 🔧 개선 방안

### 1. 즉시 조치사항 (1-2일)

#### 1.1 프로젝트명 동적화
```python
# 현재 (하드코딩)
project_name = 'sampleSrc'

# 개선안
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--project-name', required=True, help='프로젝트명')
args = parser.parse_args()
project_name = args.project_name
```

#### 1.2 DB 경로 동적화
```python
# 현재 (하드코딩)
db_path = "./project/sampleSrc/metadata.db"

# 개선안
def get_db_path(project_name: str) -> str:
    return f"./project/{project_name}/metadata.db"
```

### 2. 단기 개선사항 (1-2주)

#### 2.1 설정 기반 동적 경로
```python
# 현재 (하드코딩)
config_path = Path('config/config.yaml')

# 개선안
def get_config_path() -> Path:
    config_path = os.environ.get('CONFIG_PATH', 'config/config.yaml')
    return Path(config_path)
```

#### 2.2 스키마명 동적화
```python
# 현재 (하드코딩)
default_owner = self.config.get('database', {}).get('default_table_owner', 'SAMPLE')

# 개선안
default_owner = self.config.get('database', {}).get('default_table_owner', 
                   os.environ.get('DEFAULT_SCHEMA', 'SAMPLE'))
```

### 3. 중기 개선사항 (1-2개월)

#### 3.1 통합 설정 관리
- 모든 하드코딩된 값들을 중앙 설정 파일로 통합
- 환경별 설정 파일 분리 (dev, test, prod)
- 설정 검증 로직 추가

#### 3.2 경로 관리 개선
- 상대경로 기반 동적 경로 계산
- 프로젝트 루트 자동 감지
- 경로 템플릿 통일화

## 📋 영향도 분석

### 현재 하드코딩의 문제점

1. **운영 환경 배포 시 문제**: 프로젝트명이나 경로가 다를 경우 동작 불가
2. **다중 프로젝트 지원 불가**: 하나의 프로젝트명에만 의존
3. **테스트 환경 분리 어려움**: 하드코딩된 값으로 인한 환경 간 충돌
4. **유지보수성 저하**: 설정 변경 시 소스 코드 수정 필요

### 개선 후 기대 효과

1. **운영 환경 호환성**: 다양한 환경에서 동작 가능
2. **다중 프로젝트 지원**: 여러 프로젝트 동시 분석 가능
3. **설정 관리 용이성**: 설정 파일만 수정하여 동작 변경
4. **코드 재사용성 향상**: 하드코딩 제거로 범용성 증대

## 🎯 우선순위별 수정 계획

### Phase 1: 긴급 수정 (1주)
1. `debug_database.py` - 프로젝트명 CLI 인자화
2. `phase1/temp/run_analyzer.py` - 프로젝트명 동적화
3. `temp/check_current_metadata.py` - DB 경로 동적화

### Phase 2: 중요 수정 (2주)
1. `phase1/config/config.yaml` - 스키마명 설정화
2. `phase1/utils/edge_generator.py` - 기본값 동적화
3. `auto_sequence_runner.py` - 설정 파일 경로 동적화

### Phase 3: 개선 (1개월)
1. 통합 설정 관리 시스템 구축
2. 환경별 설정 파일 분리
3. 경로 관리 시스템 개선

## 📋 결론

### 현재 상태
- **심각한 하드코딩**: 8개 파일에서 프로젝트명/경로 하드코딩 발견
- **중간 수준 하드코딩**: 5개 파일에서 스키마명/설정 경로 하드코딩 발견
- **낮은 수준 하드코딩**: 3개 파일에서 테스트용 하드코딩 발견

### 권장사항
1. **즉시 수정**: 프로젝트명과 DB 경로 하드코딩 제거
2. **단기 개선**: 설정 기반 동적 값 할당으로 전환
3. **장기 개선**: 통합 설정 관리 시스템 구축

### 성과
- **하드코딩 현황 파악**: 전체 코드베이스의 하드코딩 현황 명확히 식별
- **개선 방향 제시**: 우선순위별 구체적인 개선 방안 제시
- **운영 환경 대응**: 다양한 환경에서의 동작 가능성 확보

---

**작성자**: AI Assistant  
**검토일**: 2025-09-06 03:30:00  
**버전**: 1.0
