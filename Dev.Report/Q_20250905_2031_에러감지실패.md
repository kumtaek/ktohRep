# Q_20250905_2031_에러감지실패.md

## 질문 개요

에러 처리 로직을 개선했음에도 불구하고 **명세서에서 예상된 7개 에러가 전혀 감지되지 않는 문제**가 발생하고 있습니다.

## 전후 배경

### 개선 작업 수행 내용
1. **에러 저장 로직 추가**: `_save_parsing_error()` 메서드 구현
2. **try-catch 강화**: 파일 분석에서 모든 예외 포착 및 DB 저장
3. **에러 처리 지침 적용**: 치명적 에러 시 `exit(1)` 추가

### 현재 결과
- **에러 감지**: 0개 (명세서 7개 대비 100% 과소)
- **파싱 성공**: 모든 파일이 정상적으로 처리됨
- **프로세스 완료**: 에러로 인한 중단 없이 완료

### 명세서에서 예상된 에러 분포
```
- MixedErrorController.java: 2개 오류 (구문 에러)
- MixedErrorService.java: 2개 오류 (로직 에러)  
- mixed/partialError.jsp: 3개 오류 (JSP 구문 에러)
총 예상: 7개 에러
```

## 문제점 상세 분석

### 1. 의도적 에러 파일이 정상 처리됨
**사례 파일**: `MixedErrorController.java`

**명세서 설명**: "일부 오류 케이스 (5개 메서드, 2개 오류)"
**현재 상황**: 파싱 성공, 에러 감지되지 않음

**의심 원인**:
1. **에러 수준 문제**: 컴파일 에러가 아닌 경고 수준의 문제들
2. **파서 관대함**: 파서가 구문 오류를 무시하고 계속 진행
3. **에러 정의 차이**: 명세서의 "오류"와 파서의 "에러" 기준이 다름

### 2. JSP 파일 에러 처리 문제
**사례 파일**: `mixed/partialError.jsp`

**명세서 설명**: "일부 오류 케이스 (8개 JSTL 태그, 3개 오류)"
**현재 상황**: JSP 파싱 성공, 에러 미감지

**예상 에러 유형**:
- 잘못된 JSTL 태그 구문
- 닫히지 않은 태그
- 잘못된 EL 표현식

**의심 원인**:
- JSP 파서가 HTML과 구문 오류를 구분하지 못함
- 에러 감지 로직이 JSP 파서에 구현되지 않음

### 3. 파서별 에러 감지 기준 부재
**현재 에러 감지 방식**:
```python
try:
    # 파싱 로직
    analysis_result = parser.parse_content(content, context)
except Exception as e:
    # 예외 발생 시에만 에러로 감지
    await self._save_parsing_error(...)
```

**문제점**:
- 파서가 예외를 던지지 않으면 에러로 인식하지 않음
- 구문상 잘못되었지만 파싱 가능한 코드는 정상으로 처리
- 파서 내부의 경고나 부분적 실패를 감지하지 못함

### 4. 에러 유형별 감지 부재
**필요한 에러 감지 유형**:
1. **구문 에러**: 컴파일/파싱 불가능한 코드
2. **의미 에러**: 구문은 맞지만 논리적으로 잘못된 코드
3. **경고 수준**: 동작하지만 권장되지 않는 패턴
4. **부분 파싱**: 일부만 성공한 경우

**현재 상황**: 예외 기반 에러만 감지 (1번만 해당)

## 핵심 질문

다음 사항들에 대한 해결 방안을 제시해 주세요:

### 1. 에러 감지 기준 명확화
**질문**: 명세서의 "오류"와 파서의 "에러" 기준을 어떻게 일치시킬 수 있나요?
- 의도적으로 포함된 에러 케이스들의 구체적 내용 확인 방법
- 파서가 감지해야 하는 에러 유형 정의
- 구문 에러 vs 의미 에러 vs 경고 수준 구분 방법

### 2. 파서별 에러 감지 로직 강화
**질문**: 각 파서에서 에러를 제대로 감지하고 보고하려면 어떻게 개선해야 하나요?
- JavaParser의 구문 에러 감지 방법
- JSP 파서의 태그/구문 오류 감지 로직
- 파서 내부에서 에러 수집 및 반환 메커니즘

### 3. 부분 파싱 결과 처리
**질문**: 파싱이 부분적으로만 성공한 경우를 어떻게 처리해야 하나요?
- 성공/실패를 이진적이 아닌 점진적으로 평가하는 방법
- 파싱 품질 점수나 신뢰도 기반 에러 판정
- 부분 성공 시 에러 정보와 성공 정보를 동시에 저장하는 방법

### 4. 에러 파일 직접 분석
**질문**: 의도적 에러 파일들을 직접 검토하여 에러 케이스를 파악할 수 있나요?
- `MixedErrorController.java`의 실제 에러 내용 확인
- `MixedErrorService.java`의 문제점 식별
- `mixed/partialError.jsp`의 JSP 에러 분석

### 5. 에러 감지 테스트 방법
**질문**: 에러 감지 기능을 체계적으로 테스트하려면 어떻게 해야 하나요?
- 알려진 에러 케이스에 대한 단위 테스트 작성
- 파서별 에러 감지 커버리지 측정 방법
- 실제 에러와 의도적 에러 케이스 구분 방법

## 예상 효과

### 수정 후 기대 결과
- **ERRORS**: 0개 → 7개 (100% 에러 감지 달성)
- **파서 신뢰성**: 에러 케이스 정확한 식별로 품질 향상
- **디버깅 지원**: 개발자에게 정확한 에러 정보 제공

### 부가 효과
- 코드 품질 분석 정확도 향상
- 프로젝트 건전성 평가 기능 강화
- 향후 코드 리뷰 및 품질 보증 도구로 활용 가능

---

**생성일시**: 2025-09-05 20:31:00  
**분석자**: SourceAnalyzer Technical Team  
**심각도**: Medium (품질 보증 기능 관련)  
**예상 수정 시간**: 2-3시간


