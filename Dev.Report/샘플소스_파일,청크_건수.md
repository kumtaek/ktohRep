# 샘플소스 파일, 청크 건수 분석 리포트

## 생성 일시
2025-09-05 10:53:00

## 샘플 구성
- **기술 스택**: Java + Spring + MyBatis + JSP + Oracle
- **특징**: 다이나믹 쿼리 + 신택스 오류 케이스 포함 (파서 검증용)
- **목적**: 파서 검증용 대규모 샘플 (정상 케이스 + 오류 케이스)

## 파일 통계

### 파일 유형별 건수
- **Java 파일**: 2개
- **JSP 파일**: 2개
- **SQL 파일**: 2개
- **총 파일**: 6개

### 파일 상세 목록

#### Java 파일 (2개)
- src/main/java/com/example/controller/UserController.java (정상 케이스)
- src/main/java/com/example/controller/ErrorController.java (오류 케이스)

#### JSP 파일 (2개)
- src/main/webapp/user/list.jsp (정상 케이스)
- src/main/webapp/user/error.jsp (오류 케이스)

#### SQL 파일 (2개)
- db_schema/oracle_schema.sql (정상 케이스)
- db_schema/error_schema.sql (오류 케이스)

## 청크 통계

### 구성요소별 건수
- **클래스**: 2개
- **메소드**: 8개
- **SQL 쿼리**: 15개
- **다이나믹 쿼리**: 6개
- **JSP 태그**: 16개
- **신택스 오류**: 15개

### 정상 케이스 상세
- **클래스**: 1개 (UserController)
- **메소드**: 2개 (getUserList, searchUsers)
- **SQL 쿼리**: 5개 (CREATE TABLE, CREATE INDEX, INSERT)
- **다이나믹 쿼리**: 6개 (Java Map 파라미터 처리)
- **JSP 태그**: 8개 (JSTL 태그들)

### 오류 케이스 상세
- **클래스**: 1개 (ErrorController)
- **메소드**: 6개 (getErrorList, searchErrors, getUsersByType, createUser 등)
- **SQL 쿼리**: 10개 (CREATE TABLE, CREATE INDEX, INSERT, CREATE VIEW, CREATE PROCEDURE, CREATE FUNCTION)
- **JSP 태그**: 8개 (JSTL 태그들)
- **신택스 오류**: 15개 (의도적 오류 패턴들)

## 신택스 오류 패턴 분석

### Java 오류 패턴 (8개)
1. **누락된 import**: ArrayList import 누락
2. **잘못된 메소드 시그니처**: 파라미터 타입 오류
3. **잘못된 변수 선언**: 타입 불일치
4. **잘못된 메소드 호출**: 존재하지 않는 메소드 호출
5. **잘못된 어노테이션 사용**: 잘못된 어노테이션
6. **잘못된 타입 캐스팅**: 타입 변환 오류
7. **잘못된 숫자 변환**: NumberFormatException 가능
8. **잘못된 예외 처리**: 예외 처리 로직 오류

### JSP 오류 패턴 (4개)
1. **잘못된 JSP 태그**: 문법 오류
2. **잘못된 JSTL 태그**: 태그 사용 오류
3. **잘못된 JavaScript**: 문법 오류
4. **잘못된 CSS**: 속성 오류

### SQL 오류 패턴 (3개)
1. **잘못된 테이블 생성**: 문법 오류
2. **잘못된 데이터 삽입**: 타입 불일치
3. **잘못된 프로시저/함수**: 문법 오류

## 파서 검증 목표
- **재현율 우선**: 누락 방지
- **정확도 목표**: 파일별 10% 이내 오차
- **과소추출**: 절대 금지
- **과다추출**: 10% 이내 허용
- **오류 처리**: 신택스 오류가 있어도 파싱 가능해야 함

## 검증 기준
1. **클래스**: 2개 (허용 범위: 2-3개)
2. **메소드**: 8개 (허용 범위: 8-9개)
3. **SQL 쿼리**: 15개 (허용 범위: 15-17개)
4. **JSP 태그**: 16개 (허용 범위: 16-18개)

## 다이나믹 쿼리 패턴
- **Java Map 파라미터**: 동적 조건 구성
- **조건부 파라미터 처리**: null 체크 및 값 설정
- **복합 조건 처리**: 여러 파라미터 조합
- **타입 변환**: String to Integer 변환
- **JSP 조건부 렌더링**: 동적 화면 구성

## 오류 처리 검증 포인트
1. **신택스 오류 감지**: 파서가 오류를 올바르게 감지하는지
2. **오류 복구**: 오류가 있어도 가능한 부분은 파싱하는지
3. **오류 보고**: 오류 위치와 내용을 정확히 보고하는지
4. **부분 파싱**: 오류 부분을 제외하고 나머지는 파싱하는지

## 결론
이 샘플은 정상 케이스와 신택스 오류 케이스가 모두 포함된 완전한 Java 웹 애플리케이션으로, 파서의 정확도 검증과 오류 처리 능력 검증에 적합한 규모와 복잡성을 제공합니다.

### 파서 검증 시나리오
1. **정상 케이스 파싱**: 정상적인 코드의 정확한 파싱
2. **오류 케이스 처리**: 신택스 오류가 있는 코드의 견고한 처리
3. **혼합 케이스**: 정상과 오류가 섞인 코드의 처리
4. **오류 복구**: 오류 발생 시 부분적 파싱 및 복구

---

## ERP 그릴 때 참고용 텍스트 형식 다이어그램

### 1. 파일 구조 다이어그램
```
sampleSrc/
├── src/main/java/com/example/controller/
│   ├── UserController.java (정상 케이스)
│   └── ErrorController.java (오류 케이스)
├── src/main/webapp/user/
│   ├── list.jsp (정상 케이스)
│   └── error.jsp (오류 케이스)
└── db_schema/
    ├── oracle_schema.sql (정상 케이스)
    └── error_schema.sql (오류 케이스)
```

### 2. 클래스 관계 다이어그램
```
┌─────────────────────────────────────────────────────────────┐
│                    UserController                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ @Controller                                             │ │
│  │ @RequestMapping("/user")                                │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ getUserList()                                           │ │
│  │ - @GetMapping("/list")                                  │ │
│  │ - 다이나믹 쿼리 처리                                    │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ 상속/확장
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    ErrorController                          │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ @Controller                                             │ │
│  │ @RequestMapping("/error")                               │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ getErrorList()                                          │ │
│  │ searchErrors()                                          │ │
│  │ getUsersByType()                                        │ │
│  │ createUser()                                            │ │
│  │ - 신택스 오류 패턴 포함                                 │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3. 데이터베이스 테이블 관계 다이어그램
```
┌─────────────────────────────────────────────────────────────┐
│                        users                                │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ id (NUMBER, PK, AUTO_INCREMENT)                         │ │
│  │ username (VARCHAR2(50), NOT NULL, UNIQUE)               │ │
│  │ email (VARCHAR2(100), NOT NULL)                         │ │
│  │ password (VARCHAR2(100), NOT NULL)                      │ │
│  │ name (VARCHAR2(100))                                    │ │
│  │ age (NUMBER(3))                                         │ │
│  │ status (VARCHAR2(20), DEFAULT 'ACTIVE')                 │ │
│  │ user_type (VARCHAR2(20), DEFAULT 'NORMAL')              │ │
│  │ phone (VARCHAR2(20))                                    │ │
│  │ address (VARCHAR2(200))                                 │ │
│  │ created_date (DATE, DEFAULT SYSDATE)                    │ │
│  │ updated_date (DATE, DEFAULT SYSDATE)                    │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ FK
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    user_types                               │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ type_code (VARCHAR2(20), PK)                            │ │
│  │ type_name (VARCHAR2(50), NOT NULL)                      │ │
│  │ description (VARCHAR2(200))                             │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 4. JSP 페이지 관계 다이어그램
```
┌─────────────────────────────────────────────────────────────┐
│                        list.jsp                             │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 정상 케이스 JSP                                         │ │
│  │ - JSTL 태그 사용                                        │ │
│  │ - 다이나믹 쿼리 결과 표시                               │ │
│  │ - 검색 폼 포함                                          │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ 확장/오류 케이스
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                        error.jsp                            │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 오류 케이스 JSP                                         │ │
│  │ - 신택스 오류 패턴 포함                                 │ │
│  │ - 잘못된 JSTL 태그                                      │ │
│  │ - 잘못된 JavaScript                                     │ │
│  │ - 잘못된 CSS                                            │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 5. 파서 검증 플로우 다이어그램
```
┌─────────────────────────────────────────────────────────────┐
│                    샘플 소스 코드                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 정상 케이스 + 오류 케이스                               │ │
│  │ - Java: 2개 파일                                        │ │
│  │ - JSP: 2개 파일                                         │ │
│  │ - SQL: 2개 파일                                         │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ 파싱
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    파서 엔진                                │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ Java Parser                                             │ │
│  │ JSP Parser                                              │ │
│  │ SQL Parser                                              │ │
│  │ - 신택스 오류 처리                                      │ │
│  │ - 부분 파싱                                             │ │
│  │ - 오류 복구                                             │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ 결과
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    메타데이터베이스                         │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ db_tables                                               │ │
│  │ db_columns                                              │ │
│  │ db_queries                                              │ │
│  │ db_methods                                              │ │
│  │ db_classes                                              │ │
│  │ db_errors                                               │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ 검증
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    검증 결과                                │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 정확도 측정                                             │ │
│  │ - 클래스: 2개 (허용: 2-3개)                             │ │
│  │ - 메소드: 8개 (허용: 8-9개)                             │ │
│  │ - SQL: 15개 (허용: 15-17개)                             │ │
│  │ - JSP: 16개 (허용: 16-18개)                             │ │
│  │ - 오류: 15개 (감지 및 처리)                             │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 6. 오류 처리 패턴 다이어그램
```
┌─────────────────────────────────────────────────────────────┐
│                    신택스 오류 케이스                       │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ Java 오류 (8개)                                         │ │
│  │ ├── 누락된 import                                       │ │
│  │ ├── 잘못된 메소드 시그니처                              │ │
│  │ ├── 잘못된 변수 선언                                    │ │
│  │ ├── 잘못된 메소드 호출                                  │ │
│  │ ├── 잘못된 어노테이션 사용                              │ │
│  │ ├── 잘못된 타입 캐스팅                                  │ │
│  │ ├── 잘못된 숫자 변환                                    │ │
│  │ └── 잘못된 예외 처리                                    │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ JSP 오류 (4개)                                          │ │
│  │ ├── 잘못된 JSP 태그                                     │ │
│  │ ├── 잘못된 JSTL 태그                                    │ │
│  │ ├── 잘못된 JavaScript                                   │ │
│  │ └── 잘못된 CSS                                          │ │
│  └─────────────────────────────────────────────────────────┘ │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ SQL 오류 (3개)                                          │ │
│  │ ├── 잘못된 테이블 생성                                  │ │
│  │ ├── 잘못된 데이터 삽입                                  │ │
│  │ └── 잘못된 프로시저/함수                                │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
                                │
                                │ 파서 처리
                                ▼
┌─────────────────────────────────────────────────────────────┐
│                    파서 오류 처리                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 1. 오류 감지                                            │ │
│  │ 2. 오류 위치 기록                                       │ │
│  │ 3. 부분 파싱 시도                                       │ │
│  │ 4. 오류 복구                                            │ │
│  │ 5. 결과 보고                                            │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 7. 검증 기준표
```
┌─────────────────────────────────────────────────────────────┐
│                    파서 검증 기준                           │
│  ┌─────────────────────────────────────────────────────────┐ │
│  │ 구성요소    │ 실제건수 │ 허용범위 │ 오차율 │ 상태        │ │
│  ├─────────────────────────────────────────────────────────┤ │
│  │ 클래스      │    2     │  2-3    │  0%    │ 정상        │ │
│  │ 메소드      │    8     │  8-9    │  0%    │ 정상        │ │
│  │ SQL 쿼리    │   15     │ 15-17   │  0%    │ 정상        │ │
│  │ JSP 태그    │   16     │ 16-18   │  0%    │ 정상        │ │
│  │ 신택스 오류 │   15     │  감지   │ 100%   │ 정상        │ │
│  └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

이 텍스트 형식 다이어그램들을 ERP 그릴 때 참고하시면 됩니다. 각 구성요소의 관계와 구조를 명확하게 보여주고 있습니다.