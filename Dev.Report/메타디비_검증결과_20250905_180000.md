# 메타디비 검증 결과 리포트

## 생성 일시
2025-09-05 18:00:00

## 개요
- **목적**: 샘플소스명세서와 메타디비 생성 결과 비교 검증
- **검증 기준**: 과소추출 0%, 과다추출 10% 이내 허용
- **프로젝트**: sampleSrc

---

## 📊 메타디비 분석 결과

### 1. 전체 통계

| 항목 | 명세서 기준 | 메타디비 결과 | 차이 | 차이율 | 상태 |
|------|-------------|---------------|------|--------|------|
| **총 파일 수** | 32 | 4 | -28 | -87.5% | ❌ 과소추출 |
| **총 클래스 수** | 16 | 0 | -16 | -100.0% | ❌ 과소추출 |
| **총 메소드 수** | 77 | 4 | -73 | -94.8% | ❌ 과소추출 |
| **총 SQL 쿼리 수** | 31 | 0 | -31 | -100.0% | ❌ 과소추출 |
| **총 오류 수** | 7 | 0 | -7 | -100.0% | ❌ 과소추출 |

### 2. 파일 타입별 분포

| 파일 타입 | 명세서 기준 | 메타디비 결과 | 차이 | 차이율 |
|-----------|-------------|---------------|------|--------|
| Java | 16 | 2 | -14 | -87.5% |
| JSP | 8 | 2 | -6 | -75.0% |
| XML | 4 | 0 | -4 | -100.0% |
| CSV | 4 | 0 | -4 | -100.0% |

---

## 🔍 검증 결과 분석

### 심각한 문제 발견

1. **파일 수 과소추출 (4/32)**: 87.5% 과소추출
2. **클래스 수 과소추출 (0/16)**: 100% 과소추출  
3. **메소드 수 과소추출 (4/77)**: 94.8% 과소추출
4. **SQL 쿼리 수 과소추출 (0/31)**: 100% 과소추출

### 원인 분석

1. **메타디비 생성 불완전**: 32개 파일 중 4개만 분석됨
2. **파서 동작 실패**: 클래스, SQL 쿼리 등이 전혀 추출되지 않음
3. **파일 스캔 범위 문제**: XML, CSV 파일이 전혀 인식되지 않음

---

## 🔧 해결 방안

### 1. 즉시 조치사항

1. **메타디비 재생성**
   - 기존 메타디비 삭제
   - phase1 파서 재실행
   - 전체 파일 스캔 확인

2. **파서 로직 점검**
   - Java 파서: 클래스 추출 실패 원인 분석
   - SQL 파서: XML 매퍼 파일 인식 실패 원인 분석
   - 파일 스캔: include_patterns 설정 확인

3. **파일 스캔 범위 확인**
   - filter_config.yaml 설정 검토
   - 파일 경로 패턴 매칭 확인

### 2. 검증 재실행

메타디비 재생성 후 동일한 검증 스크립트로 재검증 수행

---

## 📋 스키마 에러 원인 분석

### 스크립트 작성 시 오해사항

| 예상 컬럼명 | 실제 컬럼명 | 테이블 |
|-------------|-------------|--------|
| `file_type` | `language` | files |
| `sql_unit_id` | `sql_id` | sql_units |
| `has_error` | `success` | parse_results |
| `chunk_type` | `target_type` | chunks |

### JOIN 쿼리 문제

- 복잡한 JOIN 쿼리에서 존재하지 않는 컬럼 참조
- 스키마 변경에 따른 컬럼명 불일치

---

## 🎯 결론

현재 메타디비는 **심각한 과소추출 상태**입니다.

### 주요 발견사항
1. **과소추출**: 모든 항목에서 심각한 과소추출 발견
2. **파서 실패**: 클래스, SQL 쿼리 추출 완전 실패
3. **파일 스캔 불완전**: 87.5% 파일이 분석되지 않음

### 다음 단계
1. **메타디비 재생성** (최우선)
2. **파서 로직 점검**
3. **재검증 수행**

---
*이 리포트는 2025-09-05 18:00:00에 자동 생성되었습니다.*
