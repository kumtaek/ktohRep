# 건수 비교 조사 보고서

## 1. 샘플소스명세서 예상 결과

### 1.1 파일 통계
- **총 파일 수**: 20개
  - Java 파일: 8개
  - XML 파일: 2개
  - JSP 파일: 4개
  - CSV 파일: 4개
  - 기타: 2개

### 1.2 Java 분석 결과
- **클래스 수**: 8개
- **메서드 수**: 약 40개
- **Import 문**: 약 30개
- **어노테이션**: 약 20개

### 1.3 SQL 분석 결과
- **SQL 단위**: 약 25개
- **동적 쿼리**: 약 15개
- **JOIN 쿼리**: 약 8개
- **서브쿼리**: 약 5개

### 1.4 JSP 분석 결과
- **JSP 태그**: 약 20개
- **EL 표현식**: 약 15개
- **JSTL 태그**: 약 10개

## 2. 실제 메타디비 결과 (커멘트 제외 500자 이하 개선 후)

### 2.1 파일 통계
- **총 파일 수**: 25개 (예상 20개 대비 +5개, +25% 과대)
- **Java 파일**: 11개 (예상 8개 대비 +3개, +37.5% 과대)
- **XML 파일**: 2개 (예상 2개 대비 0개, 0% 정확)
- **JSP 파일**: 6개 (예상 4개 대비 +2개, +50% 과대)
- **CSV 파일**: 4개 (예상 4개 대비 0개, 0% 정확)
- **기타**: 2개 (예상 2개 대비 0개, 0% 정확)

### 2.2 Java 분석 결과
- **클래스 수**: 88개 (예상 8개 대비 +80개, +1000% 과대)
- **메서드 수**: 367개 (예상 40개 대비 +327개, +817.5% 과대)
- **Import 문**: 미확인
- **어노테이션**: 미확인

### 2.3 SQL 분석 결과
- **SQL 단위**: 253개 (예상 25개 대비 +228개, +912% 과대)
- **동적 쿼리**: 미확인
- **JOIN 쿼리**: 0개 (예상 8개 대비 -8개, -100% 과소)
- **서브쿼리**: 미확인

### 2.4 JSP 분석 결과
- **JSP 태그**: 미확인
- **EL 표현식**: 미확인
- **JSTL 태그**: 미확인

## 3. 문제점 분석

### 3.1 심각한 과대 추출 문제
1. **클래스 수**: 1000% 과대 (8개 → 88개)
2. **메서드 수**: 817.5% 과대 (40개 → 367개)
3. **SQL 단위**: 912% 과대 (25개 → 253개)

### 3.2 과소 추출 문제
1. **JOIN 쿼리**: 100% 과소 (8개 → 0개)

### 3.3 파일 수 과대
1. **총 파일 수**: 25% 과대 (20개 → 25개)

## 4. 개선 방향

### 4.1 메서드 추출 개선
- 커멘트 제외 500자 이하 로직이 작동하지 않음
- getter/setter 제외 로직 강화 필요
- 생성자 패턴 인식 문제 해결 필요

### 4.2 클래스 추출 개선
- 중복 클래스 추출 방지
- 내부 클래스 처리 개선

### 4.3 SQL 단위 추출 개선
- 중복 SQL 추출 방지
- 동적 쿼리 파싱 개선

### 4.4 JOIN 쿼리 추출 개선
- JOIN 패턴 인식 강화
- MyBatis XML에서 JOIN 추출 개선

## 5. 결론

커멘트 제외 500자 이하 개선을 적용했지만, 여전히 심각한 과대 추출 문제가 발생하고 있습니다. 특히 메서드 수가 40개에서 367개로 817.5% 과대 추출되고 있어, 근본적인 파싱 로직 개선이 필요합니다.

**우선순위**:
1. 메서드 추출 로직 전면 개선
2. 클래스 중복 추출 방지
3. SQL 단위 중복 추출 방지
4. JOIN 쿼리 추출 로직 구현
