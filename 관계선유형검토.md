# 관계선 유형 검토 보고서

## 개요
SourceAnalyzer 시각화에서 관계선이 과도하게 많아진 문제를 분석하여 각 다이어그램별 관계선 유형과 개선 방안을 제시합니다.

생성 일시: 2025-09-03 08:41:00
분석 대상: 클래스, 컴포넌트, 연관성 다이어그램

---

## 1. 클래스 다이어그램 분석

### 현재 상태
- **노드 수**: 20개 클래스
- **엣지 수**: 24개 (클래스 수 대비 많음)
- **주요 문제**: 모든 관계가 `same_package` 유형으로만 표시됨

### 관계선 유형 분석
```
전체 24개 엣지가 모두 "same_package" 유형:
- class:1 -> class:2 (same_package)
- class:3 -> class:4 (same_package)  
- class:3 -> class:5 (same_package)
- class:3 -> class:6 (same_package)
- ... (20개 더)
```

### 문제점
1. **의미없는 관계**: 단순히 같은 패키지에 있다는 이유만으로 관계선 생성
2. **실제 의존성 무시**: 메소드 호출, 상속, 구현 관계 등이 반영되지 않음
3. **시각적 노이즈**: 유용한 정보 없이 복잡성만 증가

### 개선 필요사항
- `same_package` 관계 필터링 또는 제거
- 실제 의존성 관계 (method_call, inheritance, implements) 우선 표시
- 패키지 관계는 낮은 가중치 적용

---

## 2. 컴포넌트 다이어그램 분석

### 현재 상태  
- **노드 수**: 8개 컴포넌트
- **엣지 수**: 6개 (적절한 수준)
- **상태**: 양호

### 관계선 유형 분석
```
6개 엣지, 2가지 유형:
- call 관계: 5개
  * Config -> Util (call)
  * Config -> Service (call) 
  * Controller -> Service (call)
  * Controller -> Model (call)
  * Service -> Mapper (call)
  
- use_table 관계: 1개
  * Mapper -> DB (use_table)
```

### 평가
✅ **양호한 점:**
- 명확한 아키텍처 계층 표현
- 의미있는 관계만 표시
- 적절한 관계선 수

⚠️ **개선 고려사항:**
- Model 컴포넌트가 Virtual로 표시됨 (실제 모델 클래스 부족)

---

## 3. 연관성 다이어그램 분석

### 현재 상태
- **노드 수**: 0개
- **엣지 수**: 0개
- **상태**: 빈 다이어그램

### 문제점
- 연관성 분석 로직이 동작하지 않음
- 설정 또는 데이터 부족으로 추정

---

## 4. 종합 분석 및 권장사항

### 주요 문제점
1. **클래스 다이어그램**: `same_package` 관계의 과도한 생성
2. **관계 유형 부족**: 실제 코드 의존성을 반영하지 못함
3. **필터링 부재**: 의미없는 관계선 제거 로직 부족

### 권장 개선사항

#### 우선순위 1: 클래스 다이어그램 관계 필터링
```python
# 관계 중요도 순위
1. inheritance (상속): 가중치 1.0
2. implements (구현): 가중치 0.9  
3. method_call (메소드 호출): 가중치 0.8
4. field_access (필드 접근): 가중치 0.7
5. same_package (동일 패키지): 가중치 0.3 (필터링 고려)
```

#### 우선순위 2: 관계선 임계값 설정
```python
# 관계선 표시 기준
- 신뢰도 >= 0.7: 필수 표시
- 신뢰도 0.5-0.7: 옵션 표시
- 신뢰도 < 0.5: 숨김
```

#### 우선순위 3: 관계 유형별 스타일링
```mermaid
- 실선 굵게: 상속/구현 관계
- 실선: 메소드 호출 관계  
- 점선: 필드 접근 관계
- 연한 점선: 동일 패키지 (필요시)
```

### 즉시 적용 권장사항
1. **클래스 다이어그램에서 same_package 관계 제거**
2. **신뢰도 0.7 이상 관계만 표시**
3. **컴포넌트 다이어그램은 현재 상태 유지** (양호함)

---

## 5. 구현 방향

### 단계별 개선 계획
1. **1단계**: `same_package` 관계 필터링 로직 추가
2. **2단계**: 관계 유형별 가중치 조정
3. **3단계**: 임계값 기반 관계선 표시 제어
4. **4단계**: 스타일링 개선

### 예상 효과
- 클래스 다이어그램 엣지 수: 24개 → 8-12개 (50% 감소)
- 시각적 명확성 향상
- 실제 코드 구조 반영 개선

---

*Source Analyzer 관계선 유형 검토 — 분석 일시: 2025-09-03 08:41:00*