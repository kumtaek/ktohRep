@echo off
REM 취약점 문서 다운로드 실행 스크립트
REM 사용법: run_download_vulnerability_docs.bat <project_name>

setlocal enabledelayedexpansion

if "%1"=="" (
    echo 사용법: %0 ^<project_name^>
    echo 예시: %0 sampleSrc
    exit /b 1
)

set PROJECT_NAME=%1

echo ====================================
echo 취약점 문서 다운로드 시작
echo 프로젝트: %PROJECT_NAME%
echo ====================================

REM Python 가상환경 활성화 및 스크립트 실행
call "venvSrcAnalyzer\Scripts\python.exe" download_vulnerability_docs.py --project-name %PROJECT_NAME%

if %ERRORLEVEL% NEQ 0 (
    echo 오류: 취약점 문서 다운로드 실패
    pause
    exit /b 1
)

echo.
echo ====================================
echo 다운로드 완료!
echo ====================================
echo.
echo 생성된 파일들:
echo - output\%PROJECT_NAME%\vulnerability_docs\취약점보고서.md
echo - output\%PROJECT_NAME%\vulnerability_docs\OWASP_도움말.md
echo - output\%PROJECT_NAME%\vulnerability_docs\CWE-*.md (발견된 취약점별)
echo.

pause