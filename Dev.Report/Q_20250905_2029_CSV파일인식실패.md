# Q_20250905_2029_CSV파일인식실패.md

## 질문 개요

메타디비 재생성 후에도 **CSV 파일이 전혀 인식되지 않는 문제**가 지속되고 있습니다.

## 전후 배경

### 개선 작업 수행 내용
1. **파일 스캔 패턴 수정**: `include_patterns`에 `**/*.csv` 추가
2. **파일 그룹핑 개선**: `_group_files_by_type()`에 `csv` 그룹 추가  
3. **에러 처리 강화**: 파싱 실패 시 DB 에러 로그 저장 구현

### 현재 결과
- **개선 전**: CSV 파일 0개 인식
- **개선 후**: CSV 파일 0개 인식 (변화 없음)
- **예상 결과**: CSV 파일 4개 인식

### 실제 CSV 파일 현황
```
project/sampleSrc/db_schema/ALL_TABLES.csv
project/sampleSrc/db_schema/ALL_TAB_COLUMNS.csv  
project/sampleSrc/db_schema/ALL_VIEWS.csv
project/sampleSrc/db_schema/PK_INFO.csv
```

## 문제점 상세 분석

### 1. CSV 파일 처리 경로 문제
**사례 파일**: `project/sampleSrc/db_schema/ALL_TABLES.csv`

**문제 설명**:
- include_patterns에 `**/*.csv` 추가했음에도 불구하고 파일이 스캔되지 않음
- 파일 그룹핑에서 csv 그룹이 추가되었지만 실제로는 빈 배열 상태
- CSV 파일은 `db_schema` 폴더에 위치하여 일반 소스코드와 경로가 다름

**의심 원인**:
1. **파일 스캔 범위 문제**: `db_schema` 폴더가 소스코드 스캔 범위에서 제외됨
2. **CSV 파서 부재**: CSV 파일을 처리하는 파서가 등록되지 않음
3. **DB 스키마 로딩과 소스파일 스캔의 분리**: CSV는 DB 스키마 로딩 경로로만 처리됨

### 2. 파일 스캔 범위 확인 필요
**확인해야 할 사항**:
- `project/sampleSrc/src/` 경로에서만 스캔하는지
- `project/sampleSrc/db_schema/` 경로가 스캔 범위에 포함되는지
- exclude_patterns에 의해 CSV 파일이 제외되는지

### 3. CSV 파서 등록 상태
**확인해야 할 사항**:
- ParserFactory에서 CSV 파서가 등록되어 있는지
- `_select_parser_for_file()` 메서드에서 CSV 파일에 대한 처리가 있는지
- CSV 파일을 위한 분석 로직이 구현되어 있는지

### 4. DB 스키마 로딩과의 연동 문제
**현재 상황**:
- DB 스키마 정보는 `CsvLoader`를 통해 별도로 로딩됨
- 하지만 파일 메타정보(files 테이블)에는 저장되지 않음
- 소스파일 분석과 DB 스키마 로딩이 분리된 프로세스로 동작

## 핵심 질문

다음 사항들에 대한 해결 방안을 제시해 주세요:

### 1. 파일 스캔 범위 문제
**질문**: `db_schema` 폴더의 CSV 파일들이 소스파일 스캔에 포함되도록 하려면 어떻게 수정해야 하나요?
- 스캔 경로 설정 수정 방법
- include/exclude 패턴 조정 방안
- 소스코드와 DB 스키마 파일의 통합 스캔 방법

### 2. CSV 파일 처리 로직 구현
**질문**: CSV 파일을 파싱하고 메타정보를 저장하는 로직을 어떻게 구현해야 하나요?
- CSV 파서 클래스 구현 방법
- ParserFactory에 CSV 파서 등록 방법
- CSV 파일 분석 결과 저장 방법

### 3. DB 스키마 로딩과 소스파일 스캔 통합
**질문**: 현재 분리된 두 프로세스를 어떻게 통합할 수 있나요?
- CSV 파일의 이중 처리 방지 방법
- 파일 메타정보와 DB 스키마 정보의 연계 방법
- 일관성 있는 파일 관리 방안

### 4. 우선순위별 접근 방법
**질문**: 가장 효율적인 해결 순서는 무엇인가요?
- 단기: 파일 메타정보만 저장하는 방법
- 중기: CSV 내용 파싱 및 검증 기능 추가
- 장기: DB 스키마와 소스코드 일관성 검증 시스템

## 예상 효과

### 수정 후 기대 결과
- **CSV_파일**: 0개 → 4개 (100% 개선)
- **전체 파일 인식률**: 24/28개 → 28/28개 (100% 완성)
- **메타정보 완전성**: DB 스키마 파일까지 포함한 전체 프로젝트 파일 관리

### 부가 효과
- DB 스키마와 소스코드 간 일관성 검증 기반 마련
- 프로젝트 전체 파일에 대한 통합 메타정보 관리
- 향후 스키마 변경 추적 및 영향도 분석 기능 확장 가능

---

**생성일시**: 2025-09-05 20:29:00  
**분석자**: SourceAnalyzer Technical Team  
**심각도**: Medium (기능 완전성 관련)  
**예상 수정 시간**: 1-2시간


