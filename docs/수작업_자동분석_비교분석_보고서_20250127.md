# 수작업 분석 vs 자동 분석 비교 분석 보고서

**작성일**: 2025-01-27  
**작성자**: AI Assistant  
**분석 대상**: sampleSrc 프로젝트  
**목표**: 0-30% 오차 범위 달성

---

## 1. 현재 상황 분석

### 1.1 수작업 분석 결과 (기준값)
- **총 컴포넌트 수**: 19개
  - 클래스: 11개
  - 인터페이스: 5개  
  - 메서드: 3개
- **총 관계 수**: 11개
  - dependency: 8개
  - implements: 2개
  - extends: 1개

### 1.2 자동 분석 결과 (현재 메타디비)
- **총 컴포넌트 수**: 510개 (54+25+431)
  - 클래스: 54개 (과대 추출: +43개, +391%)
  - 인터페이스: 25개 (과대 추출: +20개, +400%)
  - 메서드: 431개 (과대 추출: +428개, +14,233%)
- **총 관계 수**: 90개
  - dependency: 36개 (과대 추출: +28개, +350%)
  - implements: 8개 (과대 추출: +6개, +300%)
  - imports: 46개 (새로운 관계 유형)

---

## 2. 오차율 분석

### 2.1 컴포넌트 오차율
| 컴포넌트 타입 | 수작업 | 자동분석 | 차이 | 오차율 | 목표 달성 |
|---------------|--------|----------|------|--------|-----------|
| **클래스** | 11개 | 54개 | +43개 | +391% | ❌ 목표 초과 |
| **인터페이스** | 5개 | 25개 | +20개 | +400% | ❌ 목표 초과 |
| **메서드** | 3개 | 431개 | +428개 | +14,233% | ❌ 목표 초과 |
| **총 컴포넌트** | 19개 | 510개 | +491개 | +2,584% | ❌ 목표 초과 |

### 2.2 관계 오차율
| 관계 타입 | 수작업 | 자동분석 | 차이 | 오차율 | 목표 달성 |
|-----------|--------|----------|------|--------|-----------|
| **dependency** | 8개 | 36개 | +28개 | +350% | ❌ 목표 초과 |
| **implements** | 2개 | 8개 | +6개 | +300% | ❌ 목표 초과 |
| **extends** | 1개 | 0개 | -1개 | -100% | ❌ 목표 초과 |
| **총 관계** | 11개 | 90개 | +79개 | +718% | ❌ 목표 초과 |

---

## 3. 과대/과소 추출 원인 분석

### 3.1 메서드 과대 추출 (가장 심각)
- **현재**: 431개 vs **목표**: 3개
- **오차율**: +14,233%
- **추정 원인**:
  1. 생성자, getter/setter 메서드까지 모두 추출
  2. 내부 클래스의 메서드까지 포함
  3. 익명 클래스, 람다 표현식 메서드 포함
  4. 중복 메서드 추출

### 3.2 클래스 과대 추출
- **현재**: 54개 vs **목표**: 11개  
- **오차율**: +391%
- **추정 원인**:
  1. 내부 클래스, 익명 클래스 포함
  2. 중첩 클래스 모두 개별 추출
  3. 중복 클래스 추출

### 3.3 인터페이스 과대 추출
- **현재**: 25개 vs **목표**: 5개
- **오차율**: +400%
- **추정 원인**:
  1. 내부 인터페이스 포함
  2. 중복 인터페이스 추출

### 3.4 관계 과대 추출
- **현재**: 90개 vs **목표**: 11개
- **오차율**: +718%
- **추정 원인**:
  1. imports 관계 46개 추가 (새로운 관계 유형)
  2. 과도한 dependency 관계 추출
  3. 중복 관계 생성

---

## 4. 개선 방안

### 4.1 메서드 추출 개선
1. **필터링 규칙 추가**:
   - 생성자 제외
   - getter/setter 메서드 제외 (단, 비즈니스 로직이 있는 경우만 포함)
   - 내부 클래스 메서드 제외
   - 익명 클래스, 람다 표현식 제외

2. **중복 제거 로직 강화**:
   - 동일한 메서드 시그니처 중복 제거
   - 상속된 메서드 중복 제거

### 4.2 클래스/인터페이스 추출 개선
1. **내부 클래스/인터페이스 제외**:
   - static 내부 클래스만 포함
   - 익명 클래스 제외
   - 중첩 클래스 제외

2. **중복 제거**:
   - 동일한 FQN 중복 제거
   - 상속 관계에서 중복 제거

### 4.3 관계 추출 개선
1. **imports 관계 처리**:
   - imports 관계를 별도 테이블로 분리
   - dependency 관계와 구분

2. **중복 관계 제거**:
   - 동일한 src-dst 관계 중복 제거
   - 상속 관계에서 중복 dependency 제거

---

## 5. 다음 단계

### 5.1 즉시 실행할 개선 작업
1. **파서 수정**: `parsers/optimized_java_parser.py` 개선
2. **필터링 로직 추가**: 불필요한 컴포넌트 제외
3. **중복 제거 강화**: 동일한 요소 중복 제거
4. **재분석 실행**: `python test_optimized_metadata.py`

### 5.2 목표 달성 계획
- **1차 목표**: 오차율 50% 이하 달성
- **2차 목표**: 오차율 30% 이하 달성  
- **최종 목표**: 오차율 0-30% 범위 달성

---

## 6. 결론

현재 자동 분석 결과는 수작업 분석 대비 **극심한 과대 추출** 문제를 보이고 있습니다. 특히 메서드 추출에서 14,233%의 오차율을 보이며, 이는 파서의 필터링 로직 부족과 중복 제거 미흡이 주요 원인입니다.

**즉시 파서 개선 작업을 진행하여 목표 오차율 0-30% 범위 달성을 위해 노력하겠습니다.**

---

*이 보고서는 수작업 분석과 자동 분석의 정확한 비교를 통해 개선 방향을 제시합니다.*
